

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Upgrading CKAN &mdash; CKAN 2.5.3 documentation</title>
  

  
  

  

  
  
    

  

  
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  

  
    <link rel="top" title="CKAN 2.5.3 documentation" href="../../index.html"/>
        <link rel="up" title="Maintainer’s guide" href="../index.html"/>
        <link rel="next" title="Upgrading a CKAN 1 package install to CKAN 2.x" href="upgrade-package-ckan-1-to-2.html"/>
        <link rel="prev" title="Deploying a source install" href="../installing/deployment.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>


<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://docs.ckan.org/en/latest/maintaining/upgrading/" />

<link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'maintaining/upgrading/index'
</script>

<script type="text/javascript" src="../../_static/readthedocs-dynamic-include.js"></script>

<!-- end RTD <extrahead> --></head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../contents.html" class="icon icon-home"> CKAN
          

          
          </a>

          
            
            
            
              <div class="version">
                ckan-2.5.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="http://docs.ckan.org/en/ckan-2.5.3/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../user-guide.html">User guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin-guide.html">Sysadmin guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Maintainer&#8217;s guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installing/index.html">Installing CKAN</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="index.html">Upgrading CKAN</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#ckan-releases">CKAN releases</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#upgrading">Upgrading CKAN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#backup-your-database">1. Backup your database</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#upgrade-ckan">2. Upgrade CKAN</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../paster.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../authorization.html">Organizations and authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data-viewer.html">Data preview and visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filestore.html">FileStore and file uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastore.html">DataStore extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps-ideas.html">Apps &amp; Ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tag-vocabularies.html">Tag Vocabularies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../form-integration.html">Form Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linked-data-and-rdf.html">Linked Data and RDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background-tasks.html">Background tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../email-notifications.html">Email notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tracking.html">Page View Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multilingual.html">Multilingual Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stats.html">Stats Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration.html">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../solr-multicore.html">Multicore Solr setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extensions/index.html">Extending guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../theming/index.html">Theming guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../contents.html">CKAN</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../contents.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Maintainer&#8217;s guide</a> &raquo;</li>
      
    <li>Upgrading CKAN</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/ckan/ckan/blob/ckan-2.5.3/doc/maintaining/upgrading/index.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="upgrading-ckan">
<h1>Upgrading CKAN<a class="headerlink" href="index.html#upgrading-ckan" title="Permalink to this headline">¶</a></h1>
<p>This document describes the different types of CKAN release, and explains
how to upgrade a site to a newer version of CKAN.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="../../changelog.html"><em>Changelog</em></a></dt>
<dd>The changelog lists all CKAN releases and the main changes introduced in
each release.</dd>
<dt><a class="reference internal" href="../../contributing/release-process.html"><em>Doing a CKAN release</em></a></dt>
<dd>Documentation of the process that the CKAN developers follow to do a
CKAN release.</dd>
</dl>
</div>
<div class="section" id="ckan-releases">
<span id="releases"></span><h2>CKAN releases<a class="headerlink" href="index.html#ckan-releases" title="Permalink to this headline">¶</a></h2>
<p>CKAN follows a predictable release cycle so that users can depend on stable
releases of CKAN, and can plan their upgrades to new releases.</p>
<p>Each release has a version number of the form <tt class="docutils literal"><span class="pre">M.m</span></tt> (eg. 2.1) or <tt class="docutils literal"><span class="pre">M.m.p</span></tt>
(eg. 1.8.2), where <tt class="docutils literal"><span class="pre">M</span></tt> is the <strong>major version</strong>, <tt class="docutils literal"><span class="pre">m</span></tt> is the <strong>minor
version</strong> and <tt class="docutils literal"><span class="pre">p</span></tt> is the <strong>patch version</strong> number. There are three types of
release:</p>
<dl class="docutils">
<dt>Major Releases</dt>
<dd>Major releases, such as CKAN 1.0 and CKAN 2.0, increment the major version
number.  These releases contain major changes in the CKAN code base, with
significant refactorings and breaking changes, for instance in the API or the
templates.  These releases are very infrequent.</dd>
<dt>Minor Releases</dt>
<dd>Minor releases, such as CKAN 1.8 and CKAN 2.1, increment the minor version
number. These releases are not as disruptive as major releases, but
backwards-incompatible changes <em>may</em> be introduced in minor releases. The
<a class="reference internal" href="../../changelog.html"><em>Changelog</em></a> will document any breaking changes. We aim to release a minor
version of CKAN roughly every three months.</dd>
<dt>Patch Releases</dt>
<dd><p class="first">Patch releases, such as CKAN 1.8.1 or CKAN 2.0.1, increment the patch version
number. These releases do not break backwards-compatibility, they include
only bug fixes and non-breaking optimizations and features.
Patch releases do not contain:</p>
<ul class="last simple">
<li>Database schema changes or migrations</li>
<li>Function interface changes</li>
<li>Plugin interface changes</li>
<li>New dependencies</li>
<li>Big refactorings or new features in critical parts of the code</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Users should always run the latest patch release for the minor release they
are on, as patch releases contain important bug fixes and security updates.
Because patch releases don&#8217;t include backwards incompatible changes, the
upgrade process (as described in <a class="reference internal" href="upgrade-package-to-patch-release.html"><em>Upgrading a CKAN 2 package install to a new patch release</em></a>)
should be straightforward.</p>
<p class="last">Outdated patch releases will no longer be supported after a newer patch
release has been released. For example once CKAN 2.0.2 has been released,
CKAN 2.0.1 will no longer be supported.</p>
</div>
<p>Releases are announced on the
<a class="reference external" href="http://lists.okfn.org/mailman/listinfo/ckan-announce">ckan-announce mailing list</a>,
a low-volume list that CKAN instance maintainers can subscribe to in order to
be up to date with upcoming releases.</p>
</div>
<div class="section" id="upgrading">
<span id="id1"></span><h2>Upgrading CKAN<a class="headerlink" href="index.html#upgrading" title="Permalink to this headline">¶</a></h2>
<p>This section will walk you through the steps to upgrade your CKAN site to a
newer version of CKAN.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Before upgrading your version of CKAN you should check that any custom
templates or extensions you&#8217;re using work with the new version of CKAN.
For example, you could install the new version of CKAN in a new virtual
environment and use that to test your templates and extensions.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should also read the <a class="reference internal" href="../../changelog.html"><em>Changelog</em></a> to see if there are any extra
notes to be aware of when upgrading to the new version.</p>
</div>
<div class="section" id="backup-your-database">
<h3>1. Backup your database<a class="headerlink" href="index.html#backup-your-database" title="Permalink to this headline">¶</a></h3>
<p>You should always backup your CKAN database before upgrading CKAN. If something
goes wrong with the CKAN upgrade you can use the backup to restore the database
to its pre-upgrade state.</p>
<ol class="arabic">
<li><p class="first">Activate your virtualenv and switch to the ckan source directory, e.g.:</p>
<pre class="literal-block">
. /usr/lib/ckan/default/bin/activate
cd /usr/lib/ckan/default/src/ckan
</pre>
</li>
<li><p class="first">Backup your CKAN database using the <tt class="docutils literal"><span class="pre">db</span> <span class="pre">dump</span></tt> command, for
example:</p>
<pre class="literal-block">
paster db dump --config=/etc/ckan/default/development.ini my_ckan_database.pg_dump
</pre>
<p>This will create a file called <tt class="docutils literal"><span class="pre">my_ckan_database.pg_dump</span></tt>, you can use the
the <tt class="docutils literal"><span class="pre">db</span> <span class="pre">load</span></tt> command to restore your database to the state recorded in
this file. See <a class="reference internal" href="../paster.html#paster-db"><em>db: Manage databases</em></a> for details of the <tt class="docutils literal"><span class="pre">db</span> <span class="pre">dump</span></tt> and <tt class="docutils literal"><span class="pre">db</span>
<span class="pre">load</span></tt> commands.</p>
</li>
</ol>
</div>
<div class="section" id="upgrade-ckan">
<h3>2. Upgrade CKAN<a class="headerlink" href="index.html#upgrade-ckan" title="Permalink to this headline">¶</a></h3>
<p>The process of upgrading CKAN differs depending on whether you have a package
install or a source install of CKAN, and whether you&#8217;re upgrading to a
<a class="reference internal" href="index.html#releases"><em>major, minor or patch release</em></a> of CKAN. Follow the
appropriate one of these documents:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="upgrade-package-ckan-1-to-2.html">Upgrading a CKAN 1 package install to CKAN 2.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade-package-to-patch-release.html">Upgrading a CKAN 2 package install to a new patch release</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade-package-to-minor-release.html">Upgrading a CKAN 2 package install to a new minor release</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade-source.html">Upgrading a source install</a></li>
</ul>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation"
         aria-label="footer navigation">
      
        <a href="upgrade-package-ckan-1-to-2.html" class="btn btn-neutral float-right"
           title="Upgrading a CKAN 1 package install to CKAN 2.x"/>
           Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../installing/deployment.html" class="btn btn-neutral"
           title="Deploying a source install">
           <span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr></hr>

  <p>An <a href="http://okfn.org">Open Knowledge Foundation</a> project.</p>

  <p class="copyright">
      &copy; 2009-2013, <a href="http://okfn.org/">Open Knowledge Foundation</a>.
    Licensed under <a
    href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
    Attribution ShareAlike (Unported) v3.0 License</a>.<br />
    <img src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" alt="CC License Logo" />
    <a href="http://opendefinition.org/"><img src="http://assets.okfn.org/images/ok_buttons/oc_80x15_blue.png" border="0"
      alt="{{ _('Open Content') }}" /></a>
  
  </p>

  <p>
    <a href="https://github.com/ckan/ckan">Source</a>
    &mdash;
    <a href="https://github.com/ckan/ckan/issues">Issues</a>
    &mdash;
    <a href="http://lists.okfn.org/mailman/listinfo/ckan-dev">Mailing List</a>
    &mdash;
    <a href="http://twitter.com/CKANProject">Twitter @CKANProject</a>
  </p>

  <p>
    Related Projects:
    <a href="http://thedatahub.org/">The DataHub</a>
    &mdash;
    <a href="http://datacatalogs.org">DataCatalogs.org</a>
    &mdash;
    <a href="http://openspending.org">OpenSpending.org</a>
    &mdash;
    <a href="http://opendatahandbook.org">Open Data Handbook</a>
  </p>


  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a>  provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: ckan-2.5.3
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../../../../index.html">latest</a></dd>
        
          <dd><a href="../../../ckan-2.6.0/index.html">ckan-2.6.0</a></dd>
        
          <dd><a href="../../index.html">ckan-2.5.3</a></dd>
        
          <dd><a href="../../../ckan-2.4.4/index.html">ckan-2.4.4</a></dd>
        
          <dd><a href="../../../ckan-2.3.5/index.html">ckan-2.3.5</a></dd>
        
          <dd><a href="../../../ckan-2.2.3/index.html">ckan-2.2.3</a></dd>
        
          <dd><a href="../../../ckan-2.1.5/index.html">ckan-2.1.5</a></dd>
        
          <dd><a href="http://docs.ckan.org/en/ckan-2.0.7/">ckan-2.0.7</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.org/projects/ckan/?fromdocs=ckan">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.org/builds/ckan/?fromdocs=ckan">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.5.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>

  

  
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>