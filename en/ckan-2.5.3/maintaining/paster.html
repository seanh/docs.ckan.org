

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Command Line Interface &mdash; CKAN 2.5.3 documentation</title>
  

  
  

  

  
  
    

  

  
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  

  
    <link rel="top" title="CKAN 2.5.3 documentation" href="../index.html"/>
        <link rel="up" title="Maintainer’s guide" href="index.html"/>
        <link rel="next" title="Organizations and authorization" href="authorization.html"/>
        <link rel="prev" title="Getting started" href="getting-started.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>


<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://docs.ckan.org/en/latest/maintaining/paster.html" />

<link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'maintaining/paster'
</script>

<script type="text/javascript" src="../_static/readthedocs-dynamic-include.js"></script>

<!-- end RTD <extrahead> --></head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../contents.html" class="icon icon-home"> CKAN
          

          
          </a>

          
            
            
            
              <div class="version">
                ckan-2.5.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="http://docs.ckan.org/en/ckan-2.5.3/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user-guide.html">User guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sysadmin-guide.html">Sysadmin guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Maintainer&#8217;s guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installing/index.html">Installing CKAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrading/index.html">Upgrading CKAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="paster.html">Command Line Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="paster.html#troubleshooting-paster-commands">Troubleshooting Paster Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="paster.html#permission-error">Permission Error</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#virtualenv-not-activated-or-not-in-ckan-dir">Virtualenv not activated, or not in ckan dir</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#running-paster-commands-provided-by-extensions">Running paster commands provided by extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#wrong-config-file-path">Wrong config file path</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="paster.html#paster-commands-reference">Paster Commands Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="paster.html#celeryd-control-celery-daemon">celeryd: Control celery daemon</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#check-po-files-check-po-files-for-common-mistakes">check-po-files: Check po files for common mistakes</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#color-create-or-remove-a-color-scheme">color: Create or remove a color scheme</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#create-test-data-create-test-data">create-test-data: Create test data</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#dataset-manage-datasets">dataset: Manage datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#datastore-perform-commands-to-set-up-the-datastore">datastore: Perform commands to set up the datastore</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#db-manage-databases">db: Manage databases</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#front-end-build-creates-and-minifies-css-and-javascript-files">front-end-build: Creates and minifies css and JavaScript files</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#less-compile-all-root-less-documents-into-their-css-counterparts">less: Compile all root less documents into their CSS counterparts</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#minify-create-minified-versions-of-the-given-javascript-and-css-files">minify: Create minified versions of the given Javascript and CSS files</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#notify-send-out-modification-notifications">notify: Send out modification notifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#plugin-info-provide-info-on-installed-plugins">plugin-info: Provide info on installed plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#profile-code-speed-profiler">profile: Code speed profiler</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#ratings-manage-dataset-ratings">ratings: Manage dataset ratings</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#rdf-export-export-datasets-as-rdf">rdf-export: Export datasets as RDF</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#search-index-rebuild-search-index">search-index: Rebuild search index</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#sysadmin-give-sysadmin-rights">sysadmin: Give sysadmin rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#tracking-update-tracking-statistics">tracking: Update tracking statistics</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#trans-translation-helper-functions">trans: Translation helper functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="paster.html#user-create-and-manage-users">user: Create and manage users</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="authorization.html">Organizations and authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-viewer.html">Data preview and visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="filestore.html">FileStore and file uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html">DataStore extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="apps-ideas.html">Apps &amp; Ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="tag-vocabularies.html">Tag Vocabularies</a></li>
<li class="toctree-l2"><a class="reference internal" href="form-integration.html">Form Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="linked-data-and-rdf.html">Linked Data and RDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="background-tasks.html">Background tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="email-notifications.html">Email notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracking.html">Page View Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="multilingual.html">Multilingual Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats.html">Stats Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="solr-multicore.html">Multicore Solr setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extensions/index.html">Extending guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theming/index.html">Theming guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../contents.html">CKAN</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../contents.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Maintainer&#8217;s guide</a> &raquo;</li>
      
    <li>Command Line Interface</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/ckan/ckan/blob/ckan-2.5.3/doc/maintaining/paster.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="command-line-interface">
<h1>Command Line Interface<a class="headerlink" href="paster.html#command-line-interface" title="Permalink to this headline">¶</a></h1>
<p>Most common CKAN administration tasks can be carried out from the command line
on the server that CKAN is installed on, using the <tt class="docutils literal"><span class="pre">paster</span></tt> command.</p>
<p>If you have trouble running paster commands, see
<a class="reference internal" href="paster.html#troubleshooting-paster-commands">Troubleshooting Paster Commands</a> below.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Before running a CKAN <tt class="docutils literal"><span class="pre">paster</span></tt> command, you have to activate your CKAN
virtualenv and change to the <tt class="docutils literal"><span class="pre">ckan</span></tt>  directory, for example:</p>
<pre class="literal-block">
. /usr/lib/ckan/default/bin/activate
cd /usr/lib/ckan/default/src/ckan
</pre>
<p>To run a paster command without activating the virtualenv first, you have
to give the full path the paster script within the virtualenv, for example:</p>
<pre class="literal-block">
/usr/lib/ckan/default/bin/paster --plugin=ckan user list -c /etc/ckan/default/development.ini
</pre>
<p>To run a paster command without changing to the ckan directory first, add
the <tt class="docutils literal"><span class="pre">--plugin=ckan</span></tt> option to the command. For example:</p>
<pre class="literal-block">
paster --plugin=ckan user list -c /etc/ckan/default/development.ini
</pre>
<p class="last">In the example commands below, we assume you&#8217;re running the commands with
your virtualenv activated and from your ckan directory.</p>
</div>
<p>The general form of a CKAN <tt class="docutils literal"><span class="pre">paster</span></tt> command is:</p>
<pre class="literal-block">
paster <strong>command</strong> --config=/etc/ckan/default/development.ini
</pre>
<p>The <tt class="docutils literal"><span class="pre">--config</span></tt> option tells CKAN where to find your config file, which it
reads for example to know which database it should use. As you&#8217;ll see in the
examples below, this option can be given as <tt class="docutils literal"><span class="pre">-c</span></tt> for short.</p>
<p><tt class="docutils literal"><span class="pre">command</span></tt> should be replaced with the name of the CKAN command that you wish
to execute. Most commands have their own subcommands and options. For example,
to print out a list of all of your CKAN site&#8217;s users do:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You may also specify the location of your config file using the CKAN_INI
environment variable. You will no longer need to use &#8211;config= or -c= to
tell paster where the config file is:</p>
<pre class="last literal-block">
export CKAN_INI=/etc/ckan/default/development.ini
</pre>
</div>
<pre class="literal-block">
paster user list -c /etc/ckan/default/development.ini
</pre>
<p>(Here <tt class="docutils literal"><span class="pre">user</span></tt> is the name of the CKAN command you&#8217;re running, and <tt class="docutils literal"><span class="pre">list</span></tt> is
a subcommand of <tt class="docutils literal"><span class="pre">user</span></tt>.)</p>
<p>For a list of all available commands, simply run <tt class="docutils literal"><span class="pre">paster</span></tt> on its own with no
command, or see <a class="reference internal" href="paster.html#paster-commands-reference">Paster Commands Reference</a>. In this case we don&#8217;t need the
<tt class="docutils literal"><span class="pre">-c</span></tt> option, since we&#8217;re only asking CKAN to print out information about
commands, not to actually do anything with our CKAN site:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">paster</span>
</pre></div>
</div>
<p>Each command has its own help text, which tells you what subcommands and
options it has (if any). To print out a command&#8217;s help text, run the command
with the <tt class="docutils literal"><span class="pre">--help</span></tt> option:</p>
<div class="highlight-python"><div class="highlight"><pre>paster user --help
</pre></div>
</div>
<div class="section" id="troubleshooting-paster-commands">
<h2>Troubleshooting Paster Commands<a class="headerlink" href="paster.html#troubleshooting-paster-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="permission-error">
<h3>Permission Error<a class="headerlink" href="paster.html#permission-error" title="Permalink to this headline">¶</a></h3>
<p>If you receive &#8216;Permission Denied&#8217; error, try running paster with sudo.</p>
<pre class="literal-block">
sudo /usr/lib/ckan/default/bin/paster db clean -c /etc/ckan/default/production.ini
</pre>
</div>
<div class="section" id="virtualenv-not-activated-or-not-in-ckan-dir">
<h3>Virtualenv not activated, or not in ckan dir<a class="headerlink" href="paster.html#virtualenv-not-activated-or-not-in-ckan-dir" title="Permalink to this headline">¶</a></h3>
<p>Most errors with paster commands can be solved by remembering to <strong>activate
your virtual environment</strong> and <strong>change to the ckan directory</strong> before running
the command:</p>
<pre class="literal-block">
. /usr/lib/ckan/default/bin/activate
cd /usr/lib/ckan/default/src/ckan
</pre>
<p>Error messages such as the following are usually caused by forgetting to do
this:</p>
<ul class="simple">
<li><strong>Command &#8216;foo&#8217; not known</strong> (where <em>foo</em> is the name of the command you
tried to run)</li>
<li><strong>The program &#8216;paster&#8217; is currently not installed</strong></li>
<li><strong>Command not found: paster</strong></li>
<li><strong>ImportError: No module named fanstatic</strong> (or other <tt class="docutils literal"><span class="pre">ImportError</span></tt>s)</li>
</ul>
</div>
<div class="section" id="running-paster-commands-provided-by-extensions">
<h3>Running paster commands provided by extensions<a class="headerlink" href="paster.html#running-paster-commands-provided-by-extensions" title="Permalink to this headline">¶</a></h3>
<p><strong>If you&#8217;re trying to run a CKAN command provided by an extension</strong> that you&#8217;ve
installed and you&#8217;re getting an error like <strong>Command &#8216;foo&#8217; not known</strong> even
though you&#8217;ve activated your virtualenv and changed to the ckan directory, this
is because you need to run the extension&#8217;s paster commands from the extension&#8217;s
source directory not CKAN&#8217;s source directory. For example:</p>
<pre class="literal-block">
. /usr/lib/ckan/default/bin/activate
cd /usr/lib/ckan/default/src/ckanext-spatial
paster foo -c /etc/ckan/default/development.ini
</pre>
<p>This should not be necessary when using the pre-installed extensions that come
with CKAN.</p>
<p>Alternatively, you can give the extension&#8217;s name using the <tt class="docutils literal"><span class="pre">--plugin</span></tt> option,
for example</p>
<pre class="literal-block">
paster --plugin=ckanext-foo foo -c /etc/ckan/default/development.ini
</pre>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Running a paster shell with <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">--plugin=pylons</span> <span class="pre">shell</span> <span class="pre">-c</span> <span class="pre">...</span></tt>.
Useful for development?</p>
</div>
</div>
<div class="section" id="wrong-config-file-path">
<h3>Wrong config file path<a class="headerlink" href="paster.html#wrong-config-file-path" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>AssertionError: Config filename development.ini does not exist</dt>
<dd>This means you forgot to give the <tt class="docutils literal"><span class="pre">--config</span></tt> or <tt class="docutils literal"><span class="pre">-c</span></tt> option to tell CKAN
where to find your config file. (CKAN looks for a config file named
<tt class="docutils literal"><span class="pre">development.ini</span></tt> in your current working directory by default.)</dd>
<dt>ConfigParser.MissingSectionHeaderError: File contains no section headers</dt>
<dd>This happens if the config file that you gave with the <tt class="docutils literal"><span class="pre">-c</span></tt> or <tt class="docutils literal"><span class="pre">--config</span></tt>
option is badly formatted, or if you gave the wrong filename.</dd>
<dt>IOError: [Errno 2] No such file or directory: &#8216;...&#8217;</dt>
<dd>This means you gave the wrong path to the <tt class="docutils literal"><span class="pre">--config</span></tt> or <tt class="docutils literal"><span class="pre">-c</span></tt> option
(you gave a path to a file that doesn&#8217;t exist).</dd>
</dl>
</div>
</div>
<div class="section" id="paster-commands-reference">
<h2>Paster Commands Reference<a class="headerlink" href="paster.html#paster-commands-reference" title="Permalink to this headline">¶</a></h2>
<p>The following paster commands are supported by CKAN:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>celeryd</td>
<td>Control celery daemon.</td>
</tr>
<tr class="row-even"><td>check-po-files</td>
<td>Check po files for common mistakes</td>
</tr>
<tr class="row-odd"><td>color</td>
<td>Create or remove a color scheme.</td>
</tr>
<tr class="row-even"><td>create-test-data</td>
<td>Create test data in the database.</td>
</tr>
<tr class="row-odd"><td>dataset</td>
<td>Manage datasets.</td>
</tr>
<tr class="row-even"><td>datastore</td>
<td>Perform commands to set up the datastore.</td>
</tr>
<tr class="row-odd"><td>db</td>
<td>Perform various tasks on the database.</td>
</tr>
<tr class="row-even"><td>front-end-build</td>
<td>Creates and minifies css and JavaScript files</td>
</tr>
<tr class="row-odd"><td>less</td>
<td>Compile all root less documents into their CSS counterparts</td>
</tr>
<tr class="row-even"><td>minify</td>
<td>Create minified versions of the given Javascript and CSS files.</td>
</tr>
<tr class="row-odd"><td>notify</td>
<td>Send out modification notifications.</td>
</tr>
<tr class="row-even"><td>plugin-info</td>
<td>Provide info on installed plugins.</td>
</tr>
<tr class="row-odd"><td>profile</td>
<td>Code speed profiler</td>
</tr>
<tr class="row-even"><td>ratings</td>
<td>Manage the ratings stored in the db</td>
</tr>
<tr class="row-odd"><td>rdf-export</td>
<td>Export active datasets as RDF.</td>
</tr>
<tr class="row-even"><td>search-index</td>
<td>Creates a search index for all datasets</td>
</tr>
<tr class="row-odd"><td>sysadmin</td>
<td>Gives sysadmin rights to a named user.</td>
</tr>
<tr class="row-even"><td>tracking</td>
<td>Update tracking statistics.</td>
</tr>
<tr class="row-odd"><td>trans</td>
<td>Translation helper functions</td>
</tr>
<tr class="row-even"><td>user</td>
<td>Manage users.</td>
</tr>
</tbody>
</table>
<div class="section" id="celeryd-control-celery-daemon">
<h3>celeryd: Control celery daemon<a class="headerlink" href="paster.html#celeryd-control-celery-daemon" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>celeryd &lt;run&gt;            - run the celery daemon
celeryd run concurrency  - run the celery daemon with
                           argument &#39;concurrency&#39;
celeryd view             - view all tasks in the queue
celeryd clean            - delete all tasks in the queue
</pre></div>
</div>
</div>
<div class="section" id="check-po-files-check-po-files-for-common-mistakes">
<h3>check-po-files: Check po files for common mistakes<a class="headerlink" href="paster.html#check-po-files-check-po-files-for-common-mistakes" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>check-po-files [options] [FILE] ...
</pre></div>
</div>
</div>
<div class="section" id="color-create-or-remove-a-color-scheme">
<h3>color: Create or remove a color scheme<a class="headerlink" href="paster.html#color-create-or-remove-a-color-scheme" title="Permalink to this headline">¶</a></h3>
<p>After running this command, you&#8217;ll need to regenerate the css files. See <a class="reference internal" href="paster.html#less"><em>less: Compile all root less documents into their CSS counterparts</em></a> for details.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>color               - creates a random color scheme
color clear         - clears any color scheme
color &lt;&#39;HEX&#39;&gt;       - uses as base color eg &#39;#ff00ff&#39; must be quoted.
color &lt;VALUE&gt;       - a float between 0.0 and 1.0 used as base hue
color &lt;COLOR_NAME&gt;  - html color name used for base color eg lightblue
</pre></div>
</div>
</div>
<div class="section" id="create-test-data-create-test-data">
<h3>create-test-data: Create test data<a class="headerlink" href="paster.html#create-test-data-create-test-data" title="Permalink to this headline">¶</a></h3>
<p>As the name suggests, this command lets you load test data when first setting up CKAN. See <a class="reference internal" href="getting-started.html#create-test-data"><em>Creating test data</em></a> for details.</p>
</div>
<div class="section" id="dataset-manage-datasets">
<h3>dataset: Manage datasets<a class="headerlink" href="paster.html#dataset-manage-datasets" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>dataset DATASET_NAME|ID            - shows dataset properties
dataset show DATASET_NAME|ID       - shows dataset properties
dataset list                       - lists datasets
dataset delete [DATASET_NAME|ID]   - changes dataset state to &#39;deleted&#39;
dataset purge [DATASET_NAME|ID]    - removes dataset from db entirely
</pre></div>
</div>
</div>
<div class="section" id="datastore-perform-commands-to-set-up-the-datastore">
<h3>datastore: Perform commands to set up the datastore<a class="headerlink" href="paster.html#datastore-perform-commands-to-set-up-the-datastore" title="Permalink to this headline">¶</a></h3>
<p>Make sure that the datastore URLs are set properly before you run these commands.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>datastore set-permissions  - shows a SQL script to execute
</pre></div>
</div>
</div>
<div class="section" id="db-manage-databases">
<span id="paster-db"></span><h3>db: Manage databases<a class="headerlink" href="paster.html#db-manage-databases" title="Permalink to this headline">¶</a></h3>
<p>Lets you initialise, upgrade, and dump the CKAN database.</p>
<div class="section" id="initialization">
<h4>Initialization<a class="headerlink" href="paster.html#initialization" title="Permalink to this headline">¶</a></h4>
<p>Before you can run CKAN for the first time, you need to run <tt class="docutils literal"><span class="pre">db</span> <span class="pre">init</span></tt> to
initialize your database:</p>
<pre class="literal-block">
paster db init -c /etc/ckan/default/production.ini
</pre>
<p>If you forget to do this you&#8217;ll see this error message in your web browser:</p>
<blockquote>
<div>503 Service Unavailable:  This site is currently off-line. Database is not
initialised.</div></blockquote>
</div>
<div class="section" id="cleaning">
<h4>Cleaning<a class="headerlink" href="paster.html#cleaning" title="Permalink to this headline">¶</a></h4>
<p>You can delete everything in the CKAN database, including the tables, to start
from scratch:</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This will delete all data from your CKAN database!</p>
</div>
<pre class="literal-block">
paster db clean -c /etc/ckan/default/production.ini
</pre>
<p>After cleaning the db you must do a <tt class="docutils literal"><span class="pre">db</span> <span class="pre">init</span></tt> or <tt class="docutils literal"><span class="pre">db</span> <span class="pre">load</span></tt> before CKAN will
work again.</p>
</div>
<div class="section" id="dumping-and-loading-databases-to-from-a-file">
<span id="dumping-and-loading"></span><h4>Dumping and Loading databases to/from a file<a class="headerlink" href="paster.html#dumping-and-loading-databases-to-from-a-file" title="Permalink to this headline">¶</a></h4>
<p>You can &#8216;dump&#8217; (save) the exact state of the database to a file on disk and at
a later point &#8216;load&#8217; (restore) it again.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can also dump the database from one CKAN instance, and then load it into
another CKAN instance on the same or another machine. This will even work if
the CKAN instance you dumped the database from is an older version of CKAN
than the one you load it into, the database will be automatically upgraded
during the load command. (But you cannot load a database from a newer
version of CKAN into an older version of CKAN.)</p>
</div>
<p>To export a dump of your CKAN database:</p>
<pre class="literal-block">
paster db dump -c /etc/ckan/default/production.ini my_database_dump.sql
</pre>
<p>To load it in again, you first have to clean the database (this will delete all
data in the database!) and then load the file:</p>
<pre class="literal-block">
paster db clean -c /etc/ckan/default/production.ini
paster db load -c /etc/ckan/default/production.ini my_database_dump.sql
</pre>
</div>
<div class="section" id="exporting-datasets-to-json-or-csv">
<h4>Exporting Datasets to JSON or CSV<a class="headerlink" href="paster.html#exporting-datasets-to-json-or-csv" title="Permalink to this headline">¶</a></h4>
<p>You can export all of your CKAN site&#8217;s datasets from your database to a JSON file
using the <tt class="docutils literal"><span class="pre">db</span> <span class="pre">simple-dump-json</span></tt> command:</p>
<pre class="literal-block">
paster db simple-dump-json -c /etc/ckan/default/production.ini my_datasets.json
</pre>
<p>To export the datasets in CSV format instead, use <tt class="docutils literal"><span class="pre">db</span> <span class="pre">simple-dump-csv</span></tt>:</p>
<pre class="literal-block">
paster db simple-dump-csv -c /etc/ckan/default/production.ini my_datasets.csv
</pre>
<p>This is useful to create a simple public listing of the datasets, with no user
information. Some simple additions to the Apache config can serve the dump
files to users in a directory listing. To do this, add these lines to your
virtual Apache config file (e.g. /etc/apache2/sites-available/ckan_default.conf):</p>
<div class="highlight-python"><div class="highlight"><pre>Alias /dump/ /home/okfn/var/srvc/ckan.net/dumps/

# Disable the mod_python handler for static files
&lt;Location /dump&gt;
    SetHandler None
    Options +Indexes
&lt;/Location&gt;
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Don&#8217;t serve an SQL dump of your database (created using the <tt class="docutils literal"><span class="pre">paster</span> <span class="pre">db</span>
<span class="pre">dump</span></tt> command), as those contain private user information such as email
addresses and API keys.</p>
</div>
</div>
<div class="section" id="exporting-user-accounts-to-csv">
<h4>Exporting User Accounts to CSV<a class="headerlink" href="paster.html#exporting-user-accounts-to-csv" title="Permalink to this headline">¶</a></h4>
<p>You can export all of your CKAN site&#8217;s user accounts from your database to a CSV file
using the <tt class="docutils literal"><span class="pre">db</span> <span class="pre">user-dump-csv</span></tt> command:</p>
<pre class="literal-block">
paster db user-dump-csv -c /etc/ckan/default/production.ini my_database_users.csv
</pre>
</div>
</div>
<div class="section" id="front-end-build-creates-and-minifies-css-and-javascript-files">
<h3>front-end-build: Creates and minifies css and JavaScript files<a class="headerlink" href="paster.html#front-end-build-creates-and-minifies-css-and-javascript-files" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">front</span><span class="o">-</span><span class="n">end</span><span class="o">-</span><span class="n">build</span>
</pre></div>
</div>
</div>
<div class="section" id="less-compile-all-root-less-documents-into-their-css-counterparts">
<span id="less"></span><h3>less: Compile all root less documents into their CSS counterparts<a class="headerlink" href="paster.html#less-compile-all-root-less-documents-into-their-css-counterparts" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">less</span>
</pre></div>
</div>
</div>
<div class="section" id="minify-create-minified-versions-of-the-given-javascript-and-css-files">
<h3>minify: Create minified versions of the given Javascript and CSS files<a class="headerlink" href="paster.html#minify-create-minified-versions-of-the-given-javascript-and-css-files" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>paster minify [--clean] PATH

For example:

paster minify ckan/public/base
paster minify ckan/public/base/css/*.css
paster minify ckan/public/base/css/red.css
</pre></div>
</div>
<p>If the &#8211;clean option is provided any minified files will be removed.</p>
</div>
<div class="section" id="notify-send-out-modification-notifications">
<h3>notify: Send out modification notifications<a class="headerlink" href="paster.html#notify-send-out-modification-notifications" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>notify replay    - send out modification signals. In &quot;replay&quot; mode,
                   an update signal is sent for each dataset in the database.
</pre></div>
</div>
</div>
<div class="section" id="plugin-info-provide-info-on-installed-plugins">
<h3>plugin-info: Provide info on installed plugins<a class="headerlink" href="paster.html#plugin-info-provide-info-on-installed-plugins" title="Permalink to this headline">¶</a></h3>
<p>As the name suggests, this commands shows you the installed plugins, their description, and which interfaces they implement</p>
</div>
<div class="section" id="profile-code-speed-profiler">
<h3>profile: Code speed profiler<a class="headerlink" href="paster.html#profile-code-speed-profiler" title="Permalink to this headline">¶</a></h3>
<p>Provide a ckan url and it will make the request and record how long each function call took in a file that can be read
by runsnakerun.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>profile URL
</pre></div>
</div>
<p>The result is saved in profile.data.search. To view the profile in runsnakerun:</p>
<div class="highlight-python"><div class="highlight"><pre>runsnakerun ckan.data.search.profile
</pre></div>
</div>
<p>You may need to install the cProfile python module.</p>
</div>
<div class="section" id="ratings-manage-dataset-ratings">
<h3>ratings: Manage dataset ratings<a class="headerlink" href="paster.html#ratings-manage-dataset-ratings" title="Permalink to this headline">¶</a></h3>
<p>Manages the ratings stored in the database, and can be used to count ratings, remove all ratings, or remove only anonymous ratings.</p>
<p>For example, to remove anonymous ratings from the database:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan ratings clean-anonymous --config=/etc/ckan/std/std.ini
</pre></div>
</div>
</div>
<div class="section" id="rdf-export-export-datasets-as-rdf">
<h3>rdf-export: Export datasets as RDF<a class="headerlink" href="paster.html#rdf-export-export-datasets-as-rdf" title="Permalink to this headline">¶</a></h3>
<p>This command dumps out all currently active datasets as RDF into the specified folder:</p>
<div class="highlight-python"><div class="highlight"><pre>paster rdf-export /path/to/store/output
</pre></div>
</div>
</div>
<div class="section" id="search-index-rebuild-search-index">
<span id="rebuild-search-index"></span><h3>search-index: Rebuild search index<a class="headerlink" href="paster.html#search-index-rebuild-search-index" title="Permalink to this headline">¶</a></h3>
<p>Rebuilds the search index. This is useful to prevent search indexes from getting out of sync with the main database.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan search-index rebuild --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>This default behaviour will clear the index and rebuild it with all datasets. If you want to rebuild it for only
one dataset, you can provide a dataset name:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan search-index rebuild test-dataset-name --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>Alternatively, you can use the <cite>-o</cite> or <cite>&#8211;only-missing</cite> option to only reindex datasets which are not
already indexed:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan search-index rebuild -o --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>If you don&#8217;t want to rebuild the whole index, but just refresh it, use the <cite>-r</cite> or <cite>&#8211;refresh</cite> option. This
won&#8217;t clear the index before starting rebuilding it:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan search-index rebuild -r --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>There is also an option available which works like the refresh option but tries to use all processes on the
computer to reindex faster:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan search-index rebuild_fast --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>There are other search related commands, mostly useful for debugging purposes:</p>
<div class="highlight-python"><div class="highlight"><pre>search-index check                  - checks for datasets not indexed
search-index show DATASET_NAME      - shows index of a dataset
search-index clear [DATASET_NAME]   - clears the search index for the provided dataset or for the whole ckan instance
</pre></div>
</div>
</div>
<div class="section" id="sysadmin-give-sysadmin-rights">
<h3>sysadmin: Give sysadmin rights<a class="headerlink" href="paster.html#sysadmin-give-sysadmin-rights" title="Permalink to this headline">¶</a></h3>
<p>Gives sysadmin rights to a named user. This means the user can perform any action on any object.</p>
<p>For example, to make a user called &#8216;admin&#8217; into a sysadmin:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan sysadmin add admin --config=/etc/ckan/std/std.ini
</pre></div>
</div>
</div>
<div class="section" id="tracking-update-tracking-statistics">
<h3>tracking: Update tracking statistics<a class="headerlink" href="paster.html#tracking-update-tracking-statistics" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>tracking update [start_date]       - update tracking stats
tracking export FILE [start_date]  - export tracking stats to a csv file
</pre></div>
</div>
</div>
<div class="section" id="trans-translation-helper-functions">
<h3>trans: Translation helper functions<a class="headerlink" href="paster.html#trans-translation-helper-functions" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>trans js      - generate the javascript translations
trans mangle  - mangle the zh_TW translations for testing
</pre></div>
</div>
</div>
<div class="section" id="user-create-and-manage-users">
<span id="paster-user"></span><h3>user: Create and manage users<a class="headerlink" href="paster.html#user-create-and-manage-users" title="Permalink to this headline">¶</a></h3>
<p>Lets you create, remove, list and manage users.</p>
<p>For example, to create a new user called &#8216;admin&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan user add admin --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>To delete the &#8216;admin&#8217; user:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan user remove admin --config=/etc/ckan/std/std.ini
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation"
         aria-label="footer navigation">
      
        <a href="authorization.html" class="btn btn-neutral float-right"
           title="Organizations and authorization"/>
           Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="getting-started.html" class="btn btn-neutral"
           title="Getting started">
           <span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr></hr>

  <p>An <a href="http://okfn.org">Open Knowledge Foundation</a> project.</p>

  <p class="copyright">
      &copy; 2009-2013, <a href="http://okfn.org/">Open Knowledge Foundation</a>.
    Licensed under <a
    href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
    Attribution ShareAlike (Unported) v3.0 License</a>.<br />
    <img src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" alt="CC License Logo" />
    <a href="http://opendefinition.org/"><img src="http://assets.okfn.org/images/ok_buttons/oc_80x15_blue.png" border="0"
      alt="{{ _('Open Content') }}" /></a>
  
  </p>

  <p>
    <a href="https://github.com/ckan/ckan">Source</a>
    &mdash;
    <a href="https://github.com/ckan/ckan/issues">Issues</a>
    &mdash;
    <a href="http://lists.okfn.org/mailman/listinfo/ckan-dev">Mailing List</a>
    &mdash;
    <a href="http://twitter.com/CKANProject">Twitter @CKANProject</a>
  </p>

  <p>
    Related Projects:
    <a href="http://thedatahub.org/">The DataHub</a>
    &mdash;
    <a href="http://datacatalogs.org">DataCatalogs.org</a>
    &mdash;
    <a href="http://openspending.org">OpenSpending.org</a>
    &mdash;
    <a href="http://opendatahandbook.org">Open Data Handbook</a>
  </p>


  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a>  provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: ckan-2.5.3
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../../../index.html">latest</a></dd>
        
          <dd><a href="../../ckan-2.6.0/index.html">ckan-2.6.0</a></dd>
        
          <dd><a href="../index.html">ckan-2.5.3</a></dd>
        
          <dd><a href="../../ckan-2.4.4/index.html">ckan-2.4.4</a></dd>
        
          <dd><a href="../../ckan-2.3.5/index.html">ckan-2.3.5</a></dd>
        
          <dd><a href="../../ckan-2.2.3/index.html">ckan-2.2.3</a></dd>
        
          <dd><a href="../../ckan-2.1.5/index.html">ckan-2.1.5</a></dd>
        
          <dd><a href="http://docs.ckan.org/en/ckan-2.0.7/">ckan-2.0.7</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.org/projects/ckan/?fromdocs=ckan">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.org/builds/ckan/?fromdocs=ckan">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.5.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>

  

  
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>