<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Plugins toolkit reference &mdash; CKAN 2.2.3 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/fix.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/bootstrap-responsive.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="https://media.readthedocs.org/css/badge_only.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-css-tweaks.js"></script>
    <link rel="top" title="CKAN 2.2.3 documentation" href="../index.html" />
    <link rel="up" title="Writing CKAN extensions" href="index.html" />
    <link rel="next" title="Converter functions reference" href="converters.html" />
    <link rel="prev" title="Plugin interfaces reference" href="plugin-interfaces.html" />

  
<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://docs.ckan.org/en/latest/extensions/plugins-toolkit.html" />

<link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'extensions/plugins-toolkit'
</script>

<script type="text/javascript" src="../_static/readthedocs-dynamic-include.js"></script>

<!-- end RTD <extrahead> --></head>
  <body>
  
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        
        <a class="logo-icon pull-left" href="../contents.html"><img src="../_static/ckanlogo.png" alt="CKAN" /></a>
        
        <a class="brand" href="../contents.html">CKAN<span class="version"> v2.2.3</span></a>
        
        
        <a class="okfn-logo pull-right" href="http://okfn.org/" title="An Open Knowledge Foundation Project">
          <img src="https://s3.amazonaws.com/assets.okfn.org/p/okfn/img/logo_28x30.png" alt="Open Knowledge Foundation logo" />
        </a>
        
        
          
<form class="pull-right navbar-search" action="http://docs.ckan.org/en/ckan-2.2.3/search.html" method="get">
  <input type="text" name="q" placeholder="Search" class="search-query span2" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span4">
      <div class="well sidebar-nav">
        
          
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><div class="widget toc">
  <h3>Table of Contents</h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to CKAN&#8217;s Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide.html">User guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sysadmin-guide.html">Sysadmin guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Installing CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading.html">Upgrading CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Writing CKAN extensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Writing extensions tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing-extensions.html">Testing extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="best-practices.html">Best practices for writing extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin-interfaces.html">Plugin interfaces reference</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="plugins-toolkit.html">Plugins toolkit reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="converters.html">Converter functions reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="validators.html">Validator functions reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../theming.html">Theming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">The CKAN API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing to CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test.html">Testing CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Config File Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/index.html">Appendices</a></li>
</ul>

</div>

        </div>
      </div>
        
      </div><!--/.well -->
    </div><!--/span-->
    <div class="span8">
      <div class="content">

        
        <div style="font-size:smaller;">
              <a href="../contents.html">CKAN 2.2.3 documentation</a> &raquo;
              <a href="index.html"
                    accesskey="U">
                    Writing CKAN extensions
                  </a>
                   &raquo;
        </div>

        
  <div class="section" id="plugins-toolkit-reference">
<h1>Plugins toolkit reference<a class="headerlink" href="plugins-toolkit.html#plugins-toolkit-reference" title="Permalink to this headline">¶</a></h1>
<p>As well as using the variables made available to them by implementing plugin
interfaces, plugins will likely want to be able to use parts of the CKAN core
library. To allow this, CKAN provides a stable set of classes and functions
that plugins can use safe in the knowledge that this interface will remain
stable, backward-compatible and with clear deprecation guidelines when new
versions of CKAN are released. This interface is available in CKAN&#8217;s <em>plugins
toolkit</em>.</p>
<dl class="class">
<dt id="ckan.plugins.toolkit.BaseController">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">BaseController</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.BaseController" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for CKAN controller classes to inherit from.</p>
</dd></dl>

<dl class="class">
<dt id="ckan.plugins.toolkit.CkanCommand">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">CkanCommand</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.CkanCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for classes that implement CKAN paster commands to inherit.</p>
</dd></dl>

<dl class="class">
<dt id="ckan.plugins.toolkit.CkanVersionException">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">CkanVersionException</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.CkanVersionException" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised by
<a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.requires_ckan_version" title="ckan.plugins.toolkit.requires_ckan_version"><tt class="xref py py-func docutils literal"><span class="pre">requires_ckan_version()</span></tt></a> if the required CKAN
version is not available.</p>
</dd></dl>

<dl class="class">
<dt id="ckan.plugins.toolkit.DefaultDatasetForm">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">DefaultDatasetForm</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.DefaultDatasetForm" title="Permalink to this definition">¶</a></dt>
<dd><p>The default implementation of
<a class="reference internal" href="plugin-interfaces.html#ckan.plugins.interfaces.IDatasetForm" title="ckan.plugins.interfaces.IDatasetForm"><tt class="xref py py-class docutils literal"><span class="pre">IDatasetForm</span></tt></a>.</p>
<p>This class serves two purposes:</p>
<ol class="arabic simple">
<li>It provides a base class for plugin classes that implement
<a class="reference internal" href="plugin-interfaces.html#ckan.plugins.interfaces.IDatasetForm" title="ckan.plugins.interfaces.IDatasetForm"><tt class="xref py py-class docutils literal"><span class="pre">IDatasetForm</span></tt></a> to inherit from, so
they can inherit the default behavior and just modify the bits they
need to.</li>
<li>It is used as the default fallback plugin when no registered
<a class="reference internal" href="plugin-interfaces.html#ckan.plugins.interfaces.IDatasetForm" title="ckan.plugins.interfaces.IDatasetForm"><tt class="xref py py-class docutils literal"><span class="pre">IDatasetForm</span></tt></a> plugin handles the
given dataset type and no other plugin has registered itself as the
fallback plugin.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.DefaultDatasetForm" title="ckan.plugins.toolkit.DefaultDatasetForm"><tt class="xref py py-class docutils literal"><span class="pre">DefaultDatasetForm</span></tt></a> doesn&#8217;t call
<tt class="xref py py-func docutils literal"><span class="pre">implements()</span></tt>, because we don&#8217;t want it
being registered.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="ckan.plugins.toolkit.Invalid">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">Invalid</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.Invalid" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised by some validator, converter and dictization functions
when the given value is invalid.</p>
</dd></dl>

<dl class="class">
<dt id="ckan.plugins.toolkit.NotAuthorized">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">NotAuthorized</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.NotAuthorized" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised when the user is not authorized to call the action.</p>
<p>For example <a class="reference internal" href="../api.html#ckan.logic.action.create.package_create" title="ckan.logic.action.create.package_create"><tt class="xref py py-func docutils literal"><span class="pre">package_create()</span></tt></a> raises
<a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.NotAuthorized" title="ckan.plugins.toolkit.NotAuthorized"><tt class="xref py py-exc docutils literal"><span class="pre">NotAuthorized</span></tt></a> if the user is not authorized
to create packages.</p>
</dd></dl>

<dl class="class">
<dt id="ckan.plugins.toolkit.ObjectNotFound">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">ObjectNotFound</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.ObjectNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised by logic functions when a given object is not found.</p>
<p>For example <a class="reference internal" href="../api.html#ckan.logic.action.get.package_show" title="ckan.logic.action.get.package_show"><tt class="xref py py-func docutils literal"><span class="pre">package_show()</span></tt></a> raises
<a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.ObjectNotFound" title="ckan.plugins.toolkit.ObjectNotFound"><tt class="xref py py-exc docutils literal"><span class="pre">ObjectNotFound</span></tt></a> if no package with the
given <tt class="docutils literal"><span class="pre">id</span></tt> exists.</p>
</dd></dl>

<dl class="class">
<dt id="ckan.plugins.toolkit.UnknownConverter">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">UnknownConverter</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.UnknownConverter" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised when a requested converter function cannot be found.</p>
</dd></dl>

<dl class="class">
<dt id="ckan.plugins.toolkit.UnknownValidator">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">UnknownValidator</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.UnknownValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised when a requested validator function cannot be found.</p>
</dd></dl>

<dl class="class">
<dt id="ckan.plugins.toolkit.ValidationError">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">ValidationError</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.ValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised by action functions when validating their given
<tt class="docutils literal"><span class="pre">data_dict</span></tt> fails.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit._">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">_</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit._" title="Permalink to this definition">¶</a></dt>
<dd><p>The Pylons <tt class="docutils literal"><span class="pre">_()</span></tt> function.</p>
<p>The Pylons <tt class="docutils literal"><span class="pre">_()</span></tt> function is a reference to the <tt class="docutils literal"><span class="pre">ugettext()</span></tt> function.
Everywhere in your code where you want strings to be internationalized
(made available for translation into different languages), wrap them in the
<tt class="docutils literal"><span class="pre">_()</span></tt> function, eg.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">msg</span> <span class="o">=</span> <span class="n">toolkit</span><span class="o">.</span><span class="n">_</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.abort">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">abort</tt><big>(</big><em>status_code=None</em>, <em>detail=''</em>, <em>headers=None</em>, <em>comment=None</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.abort" title="Permalink to this definition">¶</a></dt>
<dd><p>Abort the current request immediately by returning an HTTP exception.</p>
<p>This is a wrapper for <tt class="xref py py-func docutils literal"><span class="pre">pylons.controllers.util.abort()</span></tt> that adds
some CKAN custom behavior, including allowing
<a class="reference internal" href="plugin-interfaces.html#ckan.plugins.interfaces.IAuthenticator" title="ckan.plugins.interfaces.IAuthenticator"><tt class="xref py py-class docutils literal"><span class="pre">IAuthenticator</span></tt></a> plugins to alter the
abort response, and showing flash messages in the web interface.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.add_public_directory">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">add_public_directory</tt><big>(</big><em>cls</em>, <em>config</em>, <em>relative_path</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.add_public_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a path to the <a class="reference internal" href="../configuration.html#extra-public-paths"><em>extra_public_paths</em></a> config setting.</p>
<p>The path is relative to the file calling this function.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.add_resource">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">add_resource</tt><big>(</big><em>cls</em>, <em>path</em>, <em>name</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.add_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a Fanstatic resource library to CKAN.</p>
<p>Fanstatic libraries are directories containing static resource files
(e.g. CSS, JavaScript or image files) that can be accessed from CKAN.</p>
<p>See <a class="reference internal" href="../theming.html"><em>Theming</em></a> for more details.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.add_template_directory">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">add_template_directory</tt><big>(</big><em>cls</em>, <em>config</em>, <em>relative_path</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.add_template_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a path to the <a class="reference internal" href="../configuration.html#extra-template-paths"><em>extra_template_paths</em></a> config setting.</p>
<p>The path is relative to the file calling this function.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.asbool">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">asbool</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.asbool" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a string from the
config file into a boolean.</p>
<p>For example: <tt class="docutils literal"><span class="pre">if</span> <span class="pre">toolkit.asbool(config.get('ckan.legacy_templates',</span> <span class="pre">False)):</span></tt></p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.asint">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">asint</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.asint" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a string from the config
file into an int.</p>
<p>For example: <tt class="docutils literal"><span class="pre">bar</span> <span class="pre">=</span> <span class="pre">toolkit.asint(config.get('ckan.foo.bar',</span> <span class="pre">0))</span></tt></p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.aslist">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">aslist</tt><big>(</big><em>obj</em>, <em>sep=None</em>, <em>strip=True</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.aslist" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a string from the
config file into a list.</p>
<p>For example: <tt class="docutils literal"><span class="pre">bar</span> <span class="pre">=</span> <span class="pre">toolkit.aslist(config.get('ckan.foo.bar',</span> <span class="pre">[]))</span></tt></p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.auth_allow_anonymous_access">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">auth_allow_anonymous_access</tt><big>(</big><em>action</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.auth_allow_anonymous_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag an auth function as not requiring a logged in user</p>
<p>This means that check_access won&#8217;t automatically raise a NotAuthorized
exception if an authenticated user is not provided in the context. (The
auth function can still return False if for some reason access is not
granted).</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.auth_disallow_anonymous_access">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">auth_disallow_anonymous_access</tt><big>(</big><em>action</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.auth_disallow_anonymous_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag an auth function as requiring a logged in user</p>
<p>This means that check_access will automatically raise a NotAuthorized
exception if an authenticated user is not provided in the context, without
calling the actual auth function.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.auth_sysadmins_check">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">auth_sysadmins_check</tt><big>(</big><em>action</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.auth_sysadmins_check" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that prevents sysadmins from being automatically authorized
to call an action function.</p>
<p>Normally sysadmins are allowed to call any action function (for example
when they&#8217;re using the <a class="reference internal" href="../api.html"><em>Action API</em></a> or the web interface),
if the user is a sysadmin the action function&#8217;s authorization function
will not even be called.</p>
<p>If an action function is decorated with this decorator, then its
authorization function will always be called, even if the user is a
sysadmin.</p>
</dd></dl>

<dl class="attribute">
<dt id="ckan.plugins.toolkit.c">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">c</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.c" title="Permalink to this definition">¶</a></dt>
<dd><p>The Pylons template context object.</p>
<p>This object is used to pass request-specific information to different parts of
the code in a thread-safe way (so that variables from different requests being
executed at the same time don&#8217;t get confused with each other).</p>
<p>Any attributes assigned to <a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.c" title="ckan.plugins.toolkit.c"><tt class="xref py py-attr docutils literal"><span class="pre">c</span></tt></a> are
available throughout the template and application code, and are local to the
current request.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.check_access">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">check_access</tt><big>(</big><em>action</em>, <em>context</em>, <em>data_dict=None</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.check_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the authorization function for the provided action</p>
<p>This is the only function that should be called to determine whether a
user (or an anonymous request) is allowed to perform a particular action.</p>
<p>The function accepts a context object, which should contain a &#8216;user&#8217; key
with the name of the user performing the action, and optionally a
dictionary with extra data to be passed to the authorization function.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">check_access</span><span class="p">(</span><span class="s">&#39;package_update&#39;</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">)</span>
</pre></div>
</div>
<p>If not already there, the function will add an <cite>auth_user_obj</cite> key to the
context object with the actual User object (in case it exists in the
database). This check is only performed once per context object.</p>
<p>Raise <a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.NotAuthorized" title="ckan.plugins.toolkit.NotAuthorized"><tt class="xref py py-exc docutils literal"><span class="pre">NotAuthorized</span></tt></a> if the user is not
authorized to call the named action function.</p>
<p>If the user <em>is</em> authorized to call the action, return <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>action</strong> (<em>string</em>) &#8211; the name of the action function, eg. <tt class="docutils literal"><span class="pre">'package_create'</span></tt></li>
<li><strong>context</strong> (<em>dict</em>) &#8211; </li>
<li><strong>data_dict</strong> (<em>dict</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.NotAuthorized" title="ckan.plugins.toolkit.NotAuthorized"><tt class="xref py py-exc docutils literal"><span class="pre">NotAuthorized</span></tt></a> if the user is not
authorized to call the named action</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.check_ckan_version">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">check_ckan_version</tt><big>(</big><em>cls</em>, <em>min_version=None</em>, <em>max_version=None</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.check_ckan_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <tt class="docutils literal"><span class="pre">True</span></tt> if the CKAN version is greater than or equal to
<tt class="docutils literal"><span class="pre">min_version</span></tt> and less than or equal to <tt class="docutils literal"><span class="pre">max_version</span></tt>,
return <tt class="docutils literal"><span class="pre">False</span></tt> otherwise.</p>
<p>If no <tt class="docutils literal"><span class="pre">min_version</span></tt> is given, just check whether the CKAN version is
less than or equal to <tt class="docutils literal"><span class="pre">max_version</span></tt>.</p>
<p>If no <tt class="docutils literal"><span class="pre">max_version</span></tt> is given, just check whether the CKAN version is
greater than or equal to <tt class="docutils literal"><span class="pre">min_version</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>min_version</strong> (<em>string</em>) &#8211; the minimum acceptable CKAN version,
eg. <tt class="docutils literal"><span class="pre">'2.1'</span></tt></li>
<li><strong>max_version</strong> (<em>string</em>) &#8211; the maximum acceptable CKAN version,
eg. <tt class="docutils literal"><span class="pre">'2.3'</span></tt></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.get_action">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">get_action</tt><big>(</big><em>action</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.get_action" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the named <tt class="xref py py-mod docutils literal"><span class="pre">ckan.logic.action</span></tt> function.</p>
<p>For example <tt class="docutils literal"><span class="pre">get_action('package_create')</span></tt> will normally return the
<a class="reference internal" href="../api.html#ckan.logic.action.create.package_create" title="ckan.logic.action.create.package_create"><tt class="xref py py-func docutils literal"><span class="pre">ckan.logic.action.create.package_create()</span></tt></a> function.</p>
<p>For documentation of the available action functions, see
<a class="reference internal" href="../api.html#api-reference"><em>Action API reference</em></a>.</p>
<p>You should always use <tt class="docutils literal"><span class="pre">get_action()</span></tt> instead of importing an action
function directly, because <a class="reference internal" href="plugin-interfaces.html#ckan.plugins.interfaces.IActions" title="ckan.plugins.interfaces.IActions"><tt class="xref py py-class docutils literal"><span class="pre">IActions</span></tt></a>
plugins can override action functions, causing <tt class="docutils literal"><span class="pre">get_action()</span></tt> to return a
plugin-provided function instead of the default one.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">ckan.plugins.toolkit</span> <span class="kn">as</span> <span class="nn">toolkit</span>

<span class="c"># Call the package_create action function:</span>
<span class="n">toolkit</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="s">&#39;package_create&#39;</span><span class="p">)(</span><span class="n">context</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">)</span>
</pre></div>
</div>
<p>As the context parameter passed to an action function is commonly:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;model&#39;</span><span class="p">:</span> <span class="n">ckan</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s">&#39;session&#39;</span><span class="p">:</span> <span class="n">ckan</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Session</span><span class="p">,</span>
           <span class="s">&#39;user&#39;</span><span class="p">:</span> <span class="n">pylons</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user</span> <span class="ow">or</span> <span class="n">pylons</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">author</span><span class="p">}</span>
</pre></div>
</div>
<p>an action function returned by <tt class="docutils literal"><span class="pre">get_action()</span></tt> will automatically add
these parameters to the context if they are not defined.  This is
especially useful for plugins as they should not really be importing parts
of ckan eg <tt class="xref py py-mod docutils literal"><span class="pre">ckan.model</span></tt> and as such do not have access to <tt class="docutils literal"><span class="pre">model</span></tt>
or <tt class="docutils literal"><span class="pre">model.Session</span></tt>.</p>
<p>If a <tt class="docutils literal"><span class="pre">context</span></tt> of <tt class="docutils literal"><span class="pre">None</span></tt> is passed to the action function then the
default context dict will be created.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>action</strong> (<em>string</em>) &#8211; name of the action function to return,
eg. <tt class="docutils literal"><span class="pre">'package_create'</span></tt></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the named action function</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">callable</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.get_converter">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">get_converter</tt><big>(</big><em>converter</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.get_converter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a converter function by name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>converter</strong> (<em>string</em>) &#8211; the name of the converter function to return,
eg. <tt class="docutils literal"><span class="pre">'convert_to_extras'</span></tt></td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.UnknownConverter" title="ckan.plugins.toolkit.UnknownConverter"><tt class="xref py py-exc docutils literal"><span class="pre">UnknownConverter</span></tt></a> if the named
converter is not found</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the named converter function</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><tt class="docutils literal"><span class="pre">types.FunctionType</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.get_or_bust">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">get_or_bust</tt><big>(</big><em>data_dict</em>, <em>keys</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.get_or_bust" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value(s) from the given data_dict for the given key(s).</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">single_value</span> <span class="o">=</span> <span class="n">get_or_bust</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="s">&#39;a_key&#39;</span><span class="p">)</span>
<span class="n">value_1</span><span class="p">,</span> <span class="n">value_2</span> <span class="o">=</span> <span class="n">get_or_bust</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;key1&#39;</span><span class="p">,</span> <span class="s">&#39;key2&#39;</span><span class="p">])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_dict</strong> (<em>dictionary</em>) &#8211; the dictionary to return the values from</li>
<li><strong>keys</strong> (<em>either a string or a list</em>) &#8211; the key(s) for the value(s) to return</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a single value from the dict if a single key was given,
or a tuple of values if a list of keys was given</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><tt class="xref py py-exc docutils literal"><span class="pre">ckan.logic.ValidationError</span></tt> if one of the given keys is
not in the given dictionary</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.get_validator">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">get_validator</tt><big>(</big><em>validator</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.get_validator" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a validator function by name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>validator</strong> (<em>string</em>) &#8211; the name of the validator function to return,
eg. <tt class="docutils literal"><span class="pre">'package_name_exists'</span></tt></td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.UnknownValidator" title="ckan.plugins.toolkit.UnknownValidator"><tt class="xref py py-exc docutils literal"><span class="pre">UnknownValidator</span></tt></a> if the named
validator is not found</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the named validator function</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><tt class="docutils literal"><span class="pre">types.FunctionType</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ckan.plugins.toolkit.literal">
<em class="property">class </em><tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">literal</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.literal" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an HTML literal.</p>
<p>This subclass of unicode has a <tt class="docutils literal"><span class="pre">.__html__()</span></tt> method that is
detected by the <tt class="docutils literal"><span class="pre">escape()</span></tt> function.</p>
<p>Also, if you add another string to this string, the other string
will be quoted and you will get back another literal object.  Also
<tt class="docutils literal"><span class="pre">literal(...)</span> <span class="pre">%</span> <span class="pre">obj</span></tt> will quote any value(s) from <tt class="docutils literal"><span class="pre">obj</span></tt>.  If
you do something like <tt class="docutils literal"><span class="pre">literal(...)</span> <span class="pre">+</span> <span class="pre">literal(...)</span></tt>, neither
string will be changed because <tt class="docutils literal"><span class="pre">escape(literal(...))</span></tt> doesn&#8217;t
change the original literal.</p>
<p>Changed in WebHelpers 1.2: the implementation is now now a subclass of
<tt class="docutils literal"><span class="pre">markupsafe.Markup</span></tt>.  This brings some new methods: <tt class="docutils literal"><span class="pre">.escape</span></tt> (class
method), <tt class="docutils literal"><span class="pre">.unescape</span></tt>, and <tt class="docutils literal"><span class="pre">.striptags</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.redirect_to">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">redirect_to</tt><big>(</big><em>*args</em>, <em>**kw</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.redirect_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue a redirect: return an HTTP response with a <tt class="docutils literal"><span class="pre">302</span> <span class="pre">Moved</span></tt> header.</p>
<p>This is a wrapper for <tt class="xref py py-func docutils literal"><span class="pre">routes.redirect_to()</span></tt> that maintains the
user&#8217;s selected language when redirecting.</p>
<p>The arguments to this function identify the route to redirect to, they&#8217;re
the same arguments as <a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.url_for" title="ckan.plugins.toolkit.url_for"><tt class="xref py py-func docutils literal"><span class="pre">ckan.plugins.toolkit.url_for()</span></tt></a> accepts,
for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">ckan.plugins.toolkit</span> <span class="kn">as</span> <span class="nn">toolkit</span>

<span class="c"># Redirect to /dataset/my_dataset.</span>
<span class="n">toolkit</span><span class="o">.</span><span class="n">redirect_to</span><span class="p">(</span><span class="n">controller</span><span class="o">=</span><span class="s">&#39;package&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;read&#39;</span><span class="p">,</span>
                    <span class="nb">id</span><span class="o">=</span><span class="s">&#39;my_dataset&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, using a named route:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">toolkit</span><span class="o">.</span><span class="n">redirect_to</span><span class="p">(</span><span class="s">&#39;dataset_read&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">&#39;changed&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.render">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">render</tt><big>(</big><em>template_name</em>, <em>extra_vars=None</em>, <em>cache_key=None</em>, <em>cache_type=None</em>, <em>cache_expire=None</em>, <em>method='xhtml'</em>, <em>loader_class=&lt;class 'genshi.template.markup.MarkupTemplate'&gt;</em>, <em>cache_force=None</em>, <em>renderer=None</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Render a template and return the output.</p>
<p>This is CKAN&#8217;s main template rendering function.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Document the parameters of <a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.render" title="ckan.plugins.toolkit.render"><tt class="xref py py-func docutils literal"><span class="pre">ckan.plugins.toolkit.render()</span></tt></a>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.render_snippet">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">render_snippet</tt><big>(</big><em>cls</em>, <em>template</em>, <em>data=None</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.render_snippet" title="Permalink to this definition">¶</a></dt>
<dd><p>Render a template snippet and return the output.</p>
<p>See <a class="reference internal" href="../theming.html"><em>Theming</em></a>.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.render_text">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">render_text</tt><big>(</big><em>template_name</em>, <em>extra_vars=None</em>, <em>cache_force=None</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.render_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Render a Genshi <tt class="xref py py-class docutils literal"><span class="pre">NewTextTemplate</span></tt>.</p>
<p>This is just a wrapper function that lets you render a Genshi
<tt class="xref py py-class docutils literal"><span class="pre">NewTextTemplate</span></tt> without having to pass <tt class="docutils literal"><span class="pre">method='text'</span></tt> or
<tt class="docutils literal"><span class="pre">loader_class=NewTextTemplate</span></tt> (it passes them to
<a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.render" title="ckan.plugins.toolkit.render"><tt class="xref py py-func docutils literal"><span class="pre">render()</span></tt></a> for you).</p>
</dd></dl>

<dl class="attribute">
<dt id="ckan.plugins.toolkit.request">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">request</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.request" title="Permalink to this definition">¶</a></dt>
<dd><p>The Pylons request object.</p>
<p>A new request object is created for each HTTP request. It has methods and
attributes for getting things like the request headers, query-string variables,
request body variables, cookies, the request URL, etc.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.requires_ckan_version">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">requires_ckan_version</tt><big>(</big><em>cls</em>, <em>min_version</em>, <em>max_version=None</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.requires_ckan_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise <a class="reference internal" href="plugins-toolkit.html#ckan.plugins.toolkit.CkanVersionException" title="ckan.plugins.toolkit.CkanVersionException"><tt class="xref py py-exc docutils literal"><span class="pre">CkanVersionException</span></tt></a> if the
CKAN version is not greater than or equal to <tt class="docutils literal"><span class="pre">min_version</span></tt> and
less then or equal to <tt class="docutils literal"><span class="pre">max_version</span></tt>.</p>
<p>If no <tt class="docutils literal"><span class="pre">max_version</span></tt> is given, just check whether the CKAN version is
greater than or equal to <tt class="docutils literal"><span class="pre">min_version</span></tt>.</p>
<p>Plugins can call this function if they require a certain CKAN version,
other versions of CKAN will crash if a user tries to use the plugin
with them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>min_version</strong> (<em>string</em>) &#8211; the minimum acceptable CKAN version,
eg. <tt class="docutils literal"><span class="pre">'2.1'</span></tt></li>
<li><strong>max_version</strong> (<em>string</em>) &#8211; the maximum acceptable CKAN version,
eg. <tt class="docutils literal"><span class="pre">'2.3'</span></tt></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ckan.plugins.toolkit.response">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">response</tt><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.response" title="Permalink to this definition">¶</a></dt>
<dd><p>The Pylons response object.</p>
<p>Pylons uses this object to generate the HTTP response it returns to the web
browser. It has attributes like the HTTP status code, the response headers,
content type, cookies, etc.</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.side_effect_free">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">side_effect_free</tt><big>(</big><em>action</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.side_effect_free" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that marks the given action function as side-effect-free.</p>
<p>Action functions decorated with this decorator can be called with an HTTP
GET request to the <a class="reference internal" href="../api.html"><em>Action API</em></a>. Action functions that don&#8217;t
have this decorator must be called with a POST request.</p>
<p>If your CKAN extension defines its own action functions using the
<a class="reference internal" href="plugin-interfaces.html#ckan.plugins.interfaces.IActions" title="ckan.plugins.interfaces.IActions"><tt class="xref py py-class docutils literal"><span class="pre">IActions</span></tt></a> plugin interface, you can use
this decorator to make your actions available with GET requests instead of
just with POST requests.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">ckan.plugins.toolkit</span> <span class="kn">as</span> <span class="nn">toolkit</span>

<span class="nd">@toolkit.side_effect_free</span>
<span class="k">def</span> <span class="nf">my_custom_action_function</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>(Then implement <a class="reference internal" href="plugin-interfaces.html#ckan.plugins.interfaces.IActions" title="ckan.plugins.interfaces.IActions"><tt class="xref py py-class docutils literal"><span class="pre">IActions</span></tt></a> to register
your action function with CKAN.)</p>
</dd></dl>

<dl class="function">
<dt id="ckan.plugins.toolkit.url_for">
<tt class="descclassname">ckan.plugins.toolkit.</tt><tt class="descname">url_for</tt><big>(</big><em>*args</em>, <em>**kw</em><big>)</big><a class="headerlink" href="plugins-toolkit.html#ckan.plugins.toolkit.url_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the URL for the given controller, action, id, etc.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>import ckan.plugins.toolkit as toolkit

url = toolkit.url_for(controller=&#39;package&#39;, action=&#39;read&#39;,
                      id=&#39;my_dataset&#39;)
=&gt; returns &#39;/dataset/my_dataset&#39;
</pre></div>
</div>
<p>Or, using a named route:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">toolkit</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s">&#39;dataset_read&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">&#39;changed&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is a wrapper for <tt class="xref py py-func docutils literal"><span class="pre">routes.url_for()</span></tt> that adds some extra
features that CKAN needs.</p>
</dd></dl>

</div>



        
        <div style="font-size:smaller;">
          <hr/>
          
            
          
            
          
            
              <div class="pull-right">
                <a href="converters.html"
                  title="Converter functions reference" accesskey="N">
                    
                      
                    
                    Converter functions reference→
                </a>
              </div>
            
          
            
              <div >
                <a href="plugin-interfaces.html"
                  title="Plugin interfaces reference" accesskey="P">
                    
                      
                    
                    ← Plugin interfaces reference
                </a>
              </div>
            
          
          <div style="clear:both;"></div>
        </div>

      </div>
    </div>
  </div> <!-- / row -->
</div>

<footer>
  <div class="inner">
    <div class="container-fluid">
      <p>An <a href="http://okfn.org">Open Knowledge Foundation</a> project.</p>

<p class="copyright">
  &copy; 2009-2013, <a href="http://okfn.org/">Open Knowledge Foundation</a>.
    Licensed under <a
    href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
    Attribution ShareAlike (Unported) v3.0 License</a>.<br />
    <img src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" alt="CC License Logo" />
    <a href="http://opendefinition.org/"><img src="http://assets.okfn.org/images/ok_buttons/oc_80x15_blue.png" border="0"
      alt="{{ _('Open Content') }}" /></a>
  <br/>
</p>

<p>
<a href="https://github.com/ckan/ckan">Source</a>
&mdash;
<a href="https://github.com/ckan/ckan/issues">Issues</a>
&mdash;
<a href="http://lists.okfn.org/mailman/listinfo/ckan-dev">Mailing List</a>
&mdash;
<a href="http://twitter.com/CKANProject">Twitter @CKANProject</a>
</p>

<p>
Related Projects:
<a href="http://thedatahub.org/">The DataHub</a>
&mdash;
<a href="http://datacatalogs.org">DataCatalogs.org</a>
&mdash;
<a href="http://openspending.org">OpenSpending.org</a>
&mdash;
<a href="http://opendatahandbook.org">Open Data Handbook</a>
</p>

    </div>
  </div>
</footer>



  </body>
</html>