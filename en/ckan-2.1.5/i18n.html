<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Internationalize CKAN &mdash; CKAN Documentation 2.1.5 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/fix.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/bootstrap-responsive.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnmedia.readthedocs.org/css/badge_only.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnmedia.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/underscore.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/doctools.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
    <script type="text/javascript" src="_static/bootstrap-css-tweaks.js"></script>
    <link rel="top" title="CKAN Documentation 2.1.5 documentation" href="index.html" />
    <link rel="up" title="Contributing to CKAN" href="contributing.html" />
    <link rel="next" title="CKAN Coding Standards" href="ckan-coding-standards.html" />
    <link rel="prev" title="Contributing to CKAN" href="contributing.html" />


<!-- RTD Extra Head -->



  
  <!-- 
  Always link to the latest version, as canonical.
  http://docs.readthedocs.org/en/latest/canonical.html
  -->
  <link rel="canonical" href="http://docs.ckan.org//en/latest/i18n.html" />
  

<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "ckan",
    version: "ckan-2.1.5",
    language: "en",
    page: "i18n",
    builder: "sphinx",
    theme: "sphinx-theme-okfn",
    docroot: "/doc/",
    source_suffix: ".rst",
    api_host: "https://readthedocs.org/",
    commit: "1d691ae3ba38a6b98dc69d0e2c16c71e186cd36e"
  }
  // Old variables
  var doc_version = "ckan-2.1.5";
  var doc_slug = "ckan";
  var page_name = "i18n";
  var html_theme = "sphinx-theme-okfn";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);


  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->
<!-- end RTD <extrahead> -->

  </head>
  <body role="document">
  
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        
        <a class="logo-icon pull-left" href="index.html"><img src="http://docs.ckan.org/en/ckan-2.1.5/_static/http://assets.okfn.org/p/opendatahandbook/img/data-wrench-inverted.png" alt="CKAN Documentation" /></a>
        
        <a class="brand" href="index.html">CKAN Documentation<span class="version"> v2.1.5</span></a>
        
        
        <a class="okfn-logo pull-right" href="http://okfn.org/" title="An Open Knowledge Foundation Project">
          <img src="https://s3.amazonaws.com/assets.okfn.org/p/okfn/img/logo_28x30.png" alt="Open Knowledge Foundation logo" />
        </a>
        
        
          
<form class="pull-right navbar-search" action="http://docs.ckan.org/en/ckan-2.1.5/search.html" method="get">
  <input type="text" name="q" placeholder="Search" class="search-query span2" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span4">
      <div class="well sidebar-nav">
        
          
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="contributing.html"
                        title="previous chapter">Contributing to CKAN</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ckan-coding-standards.html"
                        title="next chapter">CKAN Coding Standards</a></p><div class="widget toc">
  <h3>Table of Contents</h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading.html">Upgrading CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-extensions.html">Writing Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="theming.html">Theming</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">The CKAN API</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Testing CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Config File Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

</div>

        </div>
      </div>
        
      </div><!--/.well -->
    </div><!--/span-->
    <div class="span8">
      <div class="content">

        
        <div style="font-size:smaller;">
              <a href="index.html">CKAN Documentation 2.1.5 documentation</a> &raquo;
              <a href="contributing.html"
                    accesskey="U">
                    Contributing to CKAN
                  </a>
                   &raquo;
        </div>

        
  <div class="section" id="internationalize-ckan">
<span id="i18n"></span><h1>Internationalize CKAN<a class="headerlink" href="i18n.html#internationalize-ckan" title="Permalink to this headline">¶</a></h1>
<p>CKAN is used in many countries, and adding a new language to the web interface is a simple process.</p>
<p>CKAN uses the url to determine which language is used. An example would be <code class="docutils literal"><span class="pre">/fr/dataset</span></code> would be shown in french.  If CKAN is running under a directory then an example would be <code class="docutils literal"><span class="pre">/root/fr/dataset</span></code>.  For custom paths check the <a class="reference internal" href="configuration.html#ckan-root-path"><span>ckan.root_path</span></a> config option.</p>
<div class="section" id="supported-languages">
<h2>Supported Languages<a class="headerlink" href="i18n.html#supported-languages" title="Permalink to this headline">¶</a></h2>
<p>CKAN already supports numerous languages. To check whether your language is supported, look in the source at <code class="docutils literal"><span class="pre">ckan/i18n</span></code> for translation files. Languages are named using two-letter ISO language codes (e.g. <code class="docutils literal"><span class="pre">es</span></code>, <code class="docutils literal"><span class="pre">de</span></code>).</p>
<p>If your language is present, you can switch the default language simply by setting the <code class="docutils literal"><span class="pre">ckan.locale_default</span></code> option in your CKAN config file, as described in <a class="reference internal" href="configuration.html#config-i18n"><span>Internationalisation Settings</span></a>. For example, to switch to German:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ckan</span><span class="o">.</span><span class="n">locale_default</span><span class="o">=</span><span class="n">de</span>
</pre></div>
</div>
<p>If your language is not supported yet, the remainder of this section section provides instructions on how to prepare a translation file and add it to CKAN.</p>
</div>
<div class="section" id="adding-a-new-language">
<h2>Adding a New Language<a class="headerlink" href="i18n.html#adding-a-new-language" title="Permalink to this headline">¶</a></h2>
<p>If you want to add an entirely new language to CKAN, you have two options.</p>
<ul class="simple">
<li><a class="reference internal" href="i18n.html#i18n-transifex"><span>Transifex Setup</span></a>. Creating translation files using Transifex, the open source translation software.</li>
<li><a class="reference internal" href="i18n.html#i18n-manual"><span>Manual Setup</span></a>. Creating translation files manually.</li>
</ul>
<div class="section" id="transifex-setup">
<span id="i18n-transifex"></span><h3>Transifex Setup<a class="headerlink" href="i18n.html#transifex-setup" title="Permalink to this headline">¶</a></h3>
<p>Transifex, the open translation platform, provides a simple web interface for writing translations and is widely used for CKAN internationalization.</p>
<p>Using Transifex makes it easier to handle collaboration, with an online editor that makes the process more accessible.</p>
<p>Existing CKAN translation projects can be found at: <a class="reference external" href="https://www.transifex.net/projects/p/ckan/teams/">https://www.transifex.net/projects/p/ckan/teams/</a></p>
<p>When leading up to a CKAN release, the strings are loaded onto Transifex and ckan-discuss list is emailed to encourage translation work. When the release is done, the latest translations on Transifex are checked back into CKAN.</p>
<div class="section" id="transifex-administration">
<h4>Transifex Administration<a class="headerlink" href="i18n.html#transifex-administration" title="Permalink to this headline">¶</a></h4>
<p>The Transifex workflow is as follows:</p>
<ul class="simple">
<li>Install transifex command-line utilities</li>
<li><code class="docutils literal"><span class="pre">tx</span> <span class="pre">init</span></code> in CKAN to connect to Transifex</li>
<li>Run <code class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">extract_messages</span></code> on the CKAN source</li>
<li>Upload the local .pot file via command-line <code class="docutils literal"><span class="pre">tx</span> <span class="pre">push</span></code></li>
<li>Get people to complete translations on Transifex</li>
<li>Pull locale .po files via <code class="docutils literal"><span class="pre">tx</span> <span class="pre">pull</span></code></li>
<li><code class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">compile_catalog</span></code></li>
<li>Git Commit and push po and mo files</li>
</ul>
</div>
</div>
<div class="section" id="manual-setup">
<span id="i18n-manual"></span><h3>Manual Setup<a class="headerlink" href="i18n.html#manual-setup" title="Permalink to this headline">¶</a></h3>
<p>If you prefer not to use Transifex, you can create translation files manually.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please keep the CKAN core developers aware of new languages created in this way.</p>
</div>
<p>All the English strings in CKAN are extracted into the <code class="docutils literal"><span class="pre">ckan.pot</span></code> file, which can be found in <code class="docutils literal"><span class="pre">ckan/i18n</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For information, the pot file was created with the <code class="docutils literal"><span class="pre">babel</span></code> command <code class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">extract_messages</span></code>.</p>
</div>
<div class="section" id="install-babel">
<h4>0. Install Babel<a class="headerlink" href="i18n.html#install-babel" title="Permalink to this headline">¶</a></h4>
<p>You need Python&#8217;s <code class="docutils literal"><span class="pre">babel</span></code> library (Debian package <code class="docutils literal"><span class="pre">python-pybabel</span></code>). Install it as follows with pip:</p>
<div class="highlight-python"><div class="highlight"><pre>pip -E pyenv install babel
</pre></div>
</div>
</div>
<div class="section" id="create-a-po-file-for-your-language">
<h4>1. Create a &#8216;po&#8217; File for Your Language<a class="headerlink" href="i18n.html#create-a-po-file-for-your-language" title="Permalink to this headline">¶</a></h4>
<p>First, grab the CKAN i18n repository:</p>
<div class="highlight-python"><div class="highlight"><pre>hg clone http://bitbucket.org/bboissin/ckan-i18n/
</pre></div>
</div>
<p>Then create a translation file for your language (a po file) using the pot file:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py init_catalog --locale YOUR_LANGUAGE
</pre></div>
</div>
<p>Replace <code class="docutils literal"><span class="pre">YOUR_LANGUAGE</span></code> with the two-letter ISO language code (e.g. <code class="docutils literal"><span class="pre">es</span></code>, <code class="docutils literal"><span class="pre">de</span></code>).</p>
<p>In future, when the pot file is updated, you can update the strings in your po file, while preserving your po edits, by doing:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py update_catalog --locale YOUR-LANGUAGE
</pre></div>
</div>
</div>
<div class="section" id="do-the-translation">
<h4>2. Do the Translation<a class="headerlink" href="i18n.html#do-the-translation" title="Permalink to this headline">¶</a></h4>
<p>Edit the po file and translate the strings. For more information on how to do this, see <a class="reference external" href="http://pylonsbook.com/en/1.1/internationalization-and-localization.html">the Pylons book</a>.</p>
<p>We recommend using a translation tool, such as <a class="reference external" href="http://www.poedit.net/">poedit</a>, to check the syntax is correct. There are also extensions for editors such as emacs.</p>
</div>
<div class="section" id="commit-the-translation">
<h4>3. Commit the Translation<a class="headerlink" href="i18n.html#commit-the-translation" title="Permalink to this headline">¶</a></h4>
<p>When the po is complete, commit it to the CKAN i18n repo:</p>
<div class="highlight-python"><div class="highlight"><pre>git add ckan/i18n/YOUR_LANGUAGE/LC_MESSAGES/ckan.po
git commit -m &#39;[i18n]: New language po added: YOUR_LANGUAGE&#39; ckan/i18n/YOUR_LANGUAGE/LC_MESSAGES/ckan.po
git push
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need to be given credentials to do this - to request these, contact the <a class="reference external" href="http://lists.okfn.org/mailman/listinfo/ckan-discuss">ckan-discuss</a> list.</p>
</div>
</div>
<div class="section" id="compile-a-translation">
<h4>4. Compile a Translation<a class="headerlink" href="i18n.html#compile-a-translation" title="Permalink to this headline">¶</a></h4>
<p>Once you have created a translation (either with Transifex or manually) you can build the po file into a <code class="docutils literal"><span class="pre">mo</span></code> file, ready for deployment.</p>
<p>With either method of creating the po file, it should be found in the CKAN i18n repository: <code class="docutils literal"><span class="pre">ckan/i18n/YOUR_LANGUAGE/LC_MESSAGES/ckan.po</span></code></p>
<p>In this repo, compile the po file like this:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py compile_catalog --locale YOUR_LANGUAGE
</pre></div>
</div>
<p>As before, replace <code class="docutils literal"><span class="pre">YOUR_LANGUAGE</span></code> with your language short code, e.g. <code class="docutils literal"><span class="pre">es</span></code>, <code class="docutils literal"><span class="pre">de</span></code>.</p>
<p>This will result in a binary &#8216;mo&#8217; file of your translation at <code class="docutils literal"><span class="pre">ckan/i18n/YOUR_LANGUAGE/LC_MESSAGES/ckan.mo</span></code>.</p>
</div>
<div class="section" id="optional-deploy-the-translation">
<h4>5. (optional) Deploy the Translation<a class="headerlink" href="i18n.html#optional-deploy-the-translation" title="Permalink to this headline">¶</a></h4>
<p>This section explains how to deploy your translation automatically to your host, if you are using a remote host.</p>
<p>It assumes a standard layout on the server (you may want to check before you upload!) and that you are deploying to <code class="docutils literal"><span class="pre">hu.ckan.net</span></code> for language <code class="docutils literal"><span class="pre">hu</span></code>.</p>
<p>Once you have a compiled translation file, for automated deployment to your host do:</p>
<div class="highlight-python"><div class="highlight"><pre>fab config_0:hu.ckan.net upload_i18n:hu
</pre></div>
</div>
<p>See the <code class="docutils literal"><span class="pre">config_0</span></code> options if more configuration is needed e.g. of host or location.</p>
<p>Alternatively, if you do not want to use fab, you can just scp:</p>
<div class="highlight-python"><div class="highlight"><pre>scp ckan.mo /home/okfn/var/srvc/hu.ckan.net/pyenv/src/ckan/ckan/i18n/hu/LC_MESSAGES/ckan.mo
</pre></div>
</div>
</div>
<div class="section" id="configure-the-language">
<h4>6. Configure the Language<a class="headerlink" href="i18n.html#configure-the-language" title="Permalink to this headline">¶</a></h4>
<p>Finally, once the mo file is in place, you can switch between the installed languages using the <code class="docutils literal"><span class="pre">ckan.locale</span></code> option in the CKAN config file, as described in <a class="reference internal" href="configuration.html#config-i18n"><span>Internationalisation Settings</span></a>.</p>
</div>
</div>
</div>
</div>



        
        <div style="font-size:smaller;">
          <hr/>
          
            
          
            
              <div class="pull-right">
                <a href="ckan-coding-standards.html"
                  title="CKAN Coding Standards" accesskey="N">
                    
                      
                    
                    CKAN Coding Standards→
                </a>
              </div>
            
          
            
              <div >
                <a href="contributing.html"
                  title="Contributing to CKAN" accesskey="P">
                    
                      
                    
                    ← Contributing to CKAN
                </a>
              </div>
            
          
          <div style="clear:both;"></div>
        </div>

      </div>
    </div>
  </div> <!-- / row -->
</div>

<footer>
  <div class="inner">
    <div class="container-fluid">
      <p>An <a href="http://okfn.org">Open Knowledge Foundation</a> project.</p>

<p class="copyright">
  &copy; 2009-2012, <a href="http://okfn.org/">Open Knowledge Foundation</a>.
    Licensed under <a
    href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
    Attribution ShareAlike (Unported) v3.0 License</a>.<br />
    <img src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" alt="CC License Logo" />
    <a href="http://opendefinition.org/"><img src="http://assets.okfn.org/images/ok_buttons/oc_80x15_blue.png" border="0" 
      alt="{{ _('Open Content') }}" /></a>
  <br/>
</p>

<p>
<a href="https://github.com/okfn/ckan">Source</a>
&mdash;
<a href="https://github.com/okfn/ckan/issues">Issues</a>
&mdash;
<a href="http://lists.okfn.org/mailman/listinfo/ckan-dev">Mailing List</a>
&mdash;
<a href="http://twitter.com/CKANProject">Twitter @CKANProject</a>
</p>

<p>
Related Projects:
<a href="http://thedatahub.org/">The DataHub</a>
&mdash;
<a href="http://datacatalogs.org">DataCatalogs.org</a>
&mdash;
<a href="http://openspending.org">OpenSpending.org</a>
&mdash;
<a href="http://opendatahandbook.org">Open Data Handbook</a>
</p>

    </div>
  </div>
</footer>



  </body>
</html>