<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Command Line Interface &mdash; CKAN Documentation 2.1.5 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/fix.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/bootstrap-responsive.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnmedia.readthedocs.org/css/badge_only.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnmedia.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/underscore.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/doctools.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
    <script type="text/javascript" src="_static/bootstrap-css-tweaks.js"></script>
    <link rel="top" title="CKAN Documentation 2.1.5 documentation" href="index.html" />
    <link rel="up" title="Features" href="features.html" />
    <link rel="next" title="Authorization" href="authorization.html" />
    <link rel="prev" title="Features" href="features.html" />


<!-- RTD Extra Head -->



  
  <!-- 
  Always link to the latest version, as canonical.
  http://docs.readthedocs.org/en/latest/canonical.html
  -->
  <link rel="canonical" href="http://docs.ckan.org//en/latest/paster.html" />
  

<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "ckan",
    version: "ckan-2.1.5",
    language: "en",
    page: "paster",
    builder: "sphinx",
    theme: "sphinx-theme-okfn",
    docroot: "/doc/",
    source_suffix: ".rst",
    api_host: "https://readthedocs.org/",
    commit: "1d691ae3ba38a6b98dc69d0e2c16c71e186cd36e"
  }
  // Old variables
  var doc_version = "ckan-2.1.5";
  var doc_slug = "ckan";
  var page_name = "paster";
  var html_theme = "sphinx-theme-okfn";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);


  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->
<!-- end RTD <extrahead> -->

  </head>
  <body role="document">
  
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        
        <a class="logo-icon pull-left" href="index.html"><img src="http://docs.ckan.org/en/ckan-2.1.5/_static/http://assets.okfn.org/p/opendatahandbook/img/data-wrench-inverted.png" alt="CKAN Documentation" /></a>
        
        <a class="brand" href="index.html">CKAN Documentation<span class="version"> v2.1.5</span></a>
        
        
        <a class="okfn-logo pull-right" href="http://okfn.org/" title="An Open Knowledge Foundation Project">
          <img src="https://s3.amazonaws.com/assets.okfn.org/p/okfn/img/logo_28x30.png" alt="Open Knowledge Foundation logo" />
        </a>
        
        
          
<form class="pull-right navbar-search" action="http://docs.ckan.org/en/ckan-2.1.5/search.html" method="get">
  <input type="text" name="q" placeholder="Search" class="search-query span2" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span4">
      <div class="well sidebar-nav">
        
          
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="features.html"
                        title="previous chapter">Features</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="authorization.html"
                        title="next chapter">Authorization</a></p><div class="widget toc">
  <h3>Table of Contents</h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading.html">Upgrading CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="features.html">Features</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="paster.html">Command Line Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="paster.html#troubleshooting-paster-commands">Troubleshooting Paster Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="paster.html#paster-commands-reference">Paster Commands Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-viewer.html">Data Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="filestore.html">FileStore and File Uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html">DataStore Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="apps-ideas.html">Apps &amp; Ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="tag-vocabularies.html">Tag Vocabularies</a></li>
<li class="toctree-l2"><a class="reference internal" href="form-integration.html">Form Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="linked-data-and-rdf.html">Linked Data and RDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="background-tasks.html">Background Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="email-notifications.html">Email Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracking.html">Page View Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="multilingual.html">Multilingual Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats.html">Stats Extension</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="writing-extensions.html">Writing Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="theming.html">Theming</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">The CKAN API</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Testing CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Config File Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

</div>

        </div>
      </div>
        
      </div><!--/.well -->
    </div><!--/span-->
    <div class="span8">
      <div class="content">

        
        <div style="font-size:smaller;">
              <a href="index.html">CKAN Documentation 2.1.5 documentation</a> &raquo;
              <a href="features.html"
                    accesskey="U">
                    Features
                  </a>
                   &raquo;
        </div>

        
  <div class="section" id="command-line-interface">
<h1>Command Line Interface<a class="headerlink" href="paster.html#command-line-interface" title="Permalink to this headline">¶</a></h1>
<p>Most common CKAN administration tasks can be carried out from the command line
on the server that CKAN is installed on, using the <code class="docutils literal"><span class="pre">paster</span></code> command.</p>
<p>If you have trouble running paster commands, see
<a class="reference internal" href="paster.html#troubleshooting-paster-commands">Troubleshooting Paster Commands</a> below.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Before running a CKAN <code class="docutils literal"><span class="pre">paster</span></code> command, you have to activate your CKAN
virtualenv and change to the <code class="docutils literal"><span class="pre">ckan</span></code>  directory, for example:</p>
<pre class="literal-block">
. /usr/lib/ckan/default/bin/activate
cd /usr/lib/ckan/default/src/ckan
</pre>
<p>To run a paster command without activating the virtualenv first, you have
to give the full path the paster script within the virtualenv, for example:</p>
<pre class="literal-block">
/usr/lib/ckan/default/bin/paster --plugin=ckan user list -c /etc/ckan/default/development.ini
</pre>
<p>To run a paster command without changing to the ckan directory first, add
the <code class="docutils literal"><span class="pre">--plugin=ckan</span></code> option to the command. For example:</p>
<pre class="literal-block">
paster --plugin=ckan user list -c /etc/ckan/default/development.ini
</pre>
<p class="last">In the example commands below, we assume you&#8217;re running the commands with
your virtualenv activated and from your ckan directory.</p>
</div>
<p>The general form of a CKAN <code class="docutils literal"><span class="pre">paster</span></code> command is:</p>
<pre class="literal-block">
paster <strong>command</strong> --config=/etc/ckan/default/development.ini
</pre>
<p>The <code class="docutils literal"><span class="pre">--config</span></code> option tells CKAN where to find your config file, which it
reads for example to know which database it should use. As you&#8217;ll see in the
examples below, this option can be given as <code class="docutils literal"><span class="pre">-c</span></code> for short.</p>
<p><code class="docutils literal"><span class="pre">command</span></code> should be replaced with the name of the CKAN command that you wish
to execute. Most commands have their own subcommands and options. For example,
to print out a list of all of your CKAN site&#8217;s users do:</p>
<pre class="literal-block">
paster user list -c /etc/ckan/default/development.ini
</pre>
<p>(Here <code class="docutils literal"><span class="pre">user</span></code> is the name of the CKAN command you&#8217;re running, and <code class="docutils literal"><span class="pre">list</span></code> is
a subcommand of <code class="docutils literal"><span class="pre">user</span></code>.)</p>
<p>For a list of all available commands, simply run <code class="docutils literal"><span class="pre">paster</span></code> on its own with no
command, or see <a class="reference internal" href="paster.html#paster-commands-reference">Paster Commands Reference</a>. In this case we don&#8217;t need the
<code class="docutils literal"><span class="pre">-c</span></code> option, since we&#8217;re only asking CKAN to print out information about
commands, not to actually do anything with our CKAN site:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">paster</span>
</pre></div>
</div>
<p>Each command has its own help text, which tells you what subcommands and
options it has (if any). To print out a command&#8217;s help text, run the command
with the <code class="docutils literal"><span class="pre">--help</span></code> option:</p>
<div class="highlight-python"><div class="highlight"><pre>paster user --help
</pre></div>
</div>
<div class="section" id="troubleshooting-paster-commands">
<h2>Troubleshooting Paster Commands<a class="headerlink" href="paster.html#troubleshooting-paster-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="virtualenv-not-activated-or-not-in-ckan-dir">
<h3>Virtualenv not activated, or not in ckan dir<a class="headerlink" href="paster.html#virtualenv-not-activated-or-not-in-ckan-dir" title="Permalink to this headline">¶</a></h3>
<p>Most errors with paster commands can be solved by remembering to <strong>activate
your virtual environment</strong> and <strong>change to the ckan directory</strong> before running
the command:</p>
<pre class="literal-block">
. /usr/lib/ckan/default/bin/activate
cd /usr/lib/ckan/default/src/ckan
</pre>
<p>Error messages such as the following are usually caused by forgetting to do
this:</p>
<ul class="simple">
<li><strong>Command &#8216;foo&#8217; not known</strong> (where <em>foo</em> is the name of the command you
tried to run)</li>
<li><strong>The program &#8216;paster&#8217; is currently not installed</strong></li>
<li><strong>Command not found: paster</strong></li>
<li><strong>ImportError: No module named fanstatic</strong> (or other <code class="docutils literal"><span class="pre">ImportError</span></code>s)</li>
</ul>
</div>
<div class="section" id="running-paster-commands-provided-by-extensions">
<h3>Running paster commands provided by extensions<a class="headerlink" href="paster.html#running-paster-commands-provided-by-extensions" title="Permalink to this headline">¶</a></h3>
<p><strong>If you&#8217;re trying to run a CKAN command provided by an extension</strong> that you&#8217;ve
installed and you&#8217;re getting an error like <strong>Command &#8216;foo&#8217; not known</strong> even
though you&#8217;ve activated your virtualenv and changed to the ckan directory, this
is because you need to run the extension&#8217;s paster commands from the extension&#8217;s
source directory not CKAN&#8217;s source directory. For example:</p>
<pre class="literal-block">
. /usr/lib/ckan/default/bin/activate
cd /usr/lib/ckan/default/src/ckanext-spatial
paster foo -c /etc/ckan/default/development.ini
</pre>
<p>This should not be necessary when using the pre-installed extensions that come
with CKAN.</p>
<p>Alternatively, you can give the extension&#8217;s name using the <code class="docutils literal"><span class="pre">--plugin</span></code> option,
for example</p>
<pre class="literal-block">
paster --plugin=ckanext-foo foo -c /etc/ckan/default/development.ini
</pre>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Running a paster shell with <code class="docutils literal"><span class="pre">paster</span> <span class="pre">--plugin=pylons</span> <span class="pre">shell</span> <span class="pre">-c</span> <span class="pre">...</span></code>.
Useful for development?</p>
</div>
</div>
<div class="section" id="wrong-config-file-path">
<h3>Wrong config file path<a class="headerlink" href="paster.html#wrong-config-file-path" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>AssertionError: Config filename development.ini does not exist</dt>
<dd>This means you forgot to give the <code class="docutils literal"><span class="pre">--config</span></code> or <code class="docutils literal"><span class="pre">-c</span></code> option to tell CKAN
where to find your config file. (CKAN looks for a config file named
<code class="docutils literal"><span class="pre">development.ini</span></code> in your current working directory by default.)</dd>
<dt>ConfigParser.MissingSectionHeaderError: File contains no section headers</dt>
<dd>This happens if the config file that you gave with the <code class="docutils literal"><span class="pre">-c</span></code> or <code class="docutils literal"><span class="pre">--config</span></code>
option is badly formatted, or if you gave the wrong filename.</dd>
<dt>IOError: [Errno 2] No such file or directory: &#8216;...&#8217;</dt>
<dd>This means you gave the wrong path to the <code class="docutils literal"><span class="pre">--config</span></code> or <code class="docutils literal"><span class="pre">-c</span></code> option
(you gave a path to a file that doesn&#8217;t exist).</dd>
</dl>
</div>
</div>
<div class="section" id="paster-commands-reference">
<h2>Paster Commands Reference<a class="headerlink" href="paster.html#paster-commands-reference" title="Permalink to this headline">¶</a></h2>
<p>The following paster commands are supported by CKAN:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>celeryd</td>
<td>Control celery daemon.</td>
</tr>
<tr class="row-even"><td>check-po-files</td>
<td>Check po files for common mistakes</td>
</tr>
<tr class="row-odd"><td>color</td>
<td>Create or remove a color scheme.</td>
</tr>
<tr class="row-even"><td>create-test-data</td>
<td>Create test data in the database.</td>
</tr>
<tr class="row-odd"><td>dataset</td>
<td>Manage datasets.</td>
</tr>
<tr class="row-even"><td>datastore</td>
<td>Perform commands to set up the datastore.</td>
</tr>
<tr class="row-odd"><td>db</td>
<td>Perform various tasks on the database.</td>
</tr>
<tr class="row-even"><td>front-end-build</td>
<td>Creates and minifies css and JavaScript files</td>
</tr>
<tr class="row-odd"><td>less</td>
<td>Compile all root less documents into their CSS counterparts</td>
</tr>
<tr class="row-even"><td>minify</td>
<td>Create minified versions of the given Javascript and CSS files.</td>
</tr>
<tr class="row-odd"><td>notify</td>
<td>Send out modification notifications.</td>
</tr>
<tr class="row-even"><td>plugin-info</td>
<td>Provide info on installed plugins.</td>
</tr>
<tr class="row-odd"><td>profile</td>
<td>Code speed profiler</td>
</tr>
<tr class="row-even"><td>ratings</td>
<td>Manage the ratings stored in the db</td>
</tr>
<tr class="row-odd"><td>rdf-export</td>
<td>Export active datasets as RDF.</td>
</tr>
<tr class="row-even"><td>search-index</td>
<td>Creates a search index for all datasets</td>
</tr>
<tr class="row-odd"><td>sysadmin</td>
<td>Gives sysadmin rights to a named user.</td>
</tr>
<tr class="row-even"><td>tracking</td>
<td>Update tracking statistics.</td>
</tr>
<tr class="row-odd"><td>trans</td>
<td>Translation helper functions</td>
</tr>
<tr class="row-even"><td>user</td>
<td>Manage users.</td>
</tr>
</tbody>
</table>
<div class="section" id="celeryd-control-celery-daemon">
<h3>celeryd: Control celery daemon<a class="headerlink" href="paster.html#celeryd-control-celery-daemon" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>celeryd &lt;run&gt;            - run the celery daemon
celeryd run concurrency  - run the celery daemon with
                           argument &#39;concurrency&#39;
celeryd view             - view all tasks in the queue
celeryd clean            - delete all tasks in the queue
</pre></div>
</div>
</div>
<div class="section" id="check-po-files-check-po-files-for-common-mistakes">
<h3>check-po-files: Check po files for common mistakes<a class="headerlink" href="paster.html#check-po-files-check-po-files-for-common-mistakes" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>check-po-files [options] [FILE] ...
</pre></div>
</div>
</div>
<div class="section" id="color-create-or-remove-a-color-scheme">
<h3>color: Create or remove a color scheme<a class="headerlink" href="paster.html#color-create-or-remove-a-color-scheme" title="Permalink to this headline">¶</a></h3>
<p>After running this command, you&#8217;ll need to regenerate the css files. See <a class="reference internal" href="paster.html#less"><span>less: Compile all root less documents into their CSS counterparts</span></a> for details.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>color               - creates a random color scheme
color clear         - clears any color scheme
color &lt;&#39;HEX&#39;&gt;       - uses as base color eg &#39;#ff00ff&#39; must be quoted.
color &lt;VALUE&gt;       - a float between 0.0 and 1.0 used as base hue
color &lt;COLOR_NAME&gt;  - html color name used for base color eg lightblue
</pre></div>
</div>
</div>
<div class="section" id="create-test-data-create-test-data">
<h3>create-test-data: Create test data<a class="headerlink" href="paster.html#create-test-data-create-test-data" title="Permalink to this headline">¶</a></h3>
<p>As the name suggests, this command lets you load test data when first setting up CKAN. See <a class="reference internal" href="getting-started.html#create-test-data"><span>Creating Test Data</span></a> for details.</p>
</div>
<div class="section" id="dataset-manage-datasets">
<h3>dataset: Manage datasets<a class="headerlink" href="paster.html#dataset-manage-datasets" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>dataset DATASET_NAME|ID            - shows dataset properties
dataset show DATASET_NAME|ID       - shows dataset properties
dataset list                       - lists datasets
dataset delete [DATASET_NAME|ID]   - changes dataset state to &#39;deleted&#39;
dataset purge [DATASET_NAME|ID]    - removes dataset from db entirely
</pre></div>
</div>
</div>
<div class="section" id="datastore-perform-commands-to-set-up-the-datastore">
<h3>datastore: Perform commands to set up the datastore<a class="headerlink" href="paster.html#datastore-perform-commands-to-set-up-the-datastore" title="Permalink to this headline">¶</a></h3>
<p>Make sure that the datastore URLs are set properly before you run these commands.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>datastore set-permissions SQL_SUPER_USER

Where:
    SQL_SUPER_USER is the name of a postgres user with sufficient
                   permissions to create new tables, users, and grant
                   and revoke new permissions.  Typically, this would
                   be the &quot;postgres&quot; user.
</pre></div>
</div>
</div>
<div class="section" id="db-manage-databases">
<span id="paster-db"></span><h3>db: Manage databases<a class="headerlink" href="paster.html#db-manage-databases" title="Permalink to this headline">¶</a></h3>
<p>Lets you initialise, upgrade, and dump the CKAN database.</p>
<div class="section" id="initialization">
<h4>Initialization<a class="headerlink" href="paster.html#initialization" title="Permalink to this headline">¶</a></h4>
<p>Before you can run CKAN for the first time, you need to run <code class="docutils literal"><span class="pre">db</span> <span class="pre">init</span></code> to
initialize your database:</p>
<pre class="literal-block">
paster db init -c /etc/ckan/default/production.ini
</pre>
<p>If you forget to do this you&#8217;ll see this error message in your web browser:</p>
<blockquote>
<div>503 Service Unavailable:  This site is currently off-line. Database is not
initialised.</div></blockquote>
</div>
<div class="section" id="cleaning">
<h4>Cleaning<a class="headerlink" href="paster.html#cleaning" title="Permalink to this headline">¶</a></h4>
<p>You can delete everything in the CKAN database, including the tables, to start
from scratch:</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This will delete all data from your CKAN database!</p>
</div>
<pre class="literal-block">
paster db clean -c /etc/ckan/default/production.ini
</pre>
<p>After cleaning the db you must do a <code class="docutils literal"><span class="pre">db</span> <span class="pre">init</span></code> or <code class="docutils literal"><span class="pre">db</span> <span class="pre">load</span></code> before CKAN will
work again.</p>
</div>
<div class="section" id="dumping-and-loading-databases-to-from-a-file">
<span id="dumping-and-loading"></span><h4>Dumping and Loading databases to/from a file<a class="headerlink" href="paster.html#dumping-and-loading-databases-to-from-a-file" title="Permalink to this headline">¶</a></h4>
<p>You can &#8216;dump&#8217; (save) the exact state of the database to a file on disk and at
a later point &#8216;load&#8217; (restore) it again.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can also dump the database from one CKAN instance, and then load it into
another CKAN instance on the same or another machine. This will even work if
the CKAN instance you dumped the database from is an older version of CKAN
than the one you load it into, the database will be automatically upgraded
during the load command. (But you cannot load a database from a newer
version of CKAN into an older version of CKAN.)</p>
</div>
<p>To export a dump of your CKAN database:</p>
<pre class="literal-block">
paster db dump -c /etc/ckan/default/production.ini my_database_dump.sql
</pre>
<p>To load it in again, you first have to clean the database (this will delete all
data in the database!) and then load the file:</p>
<pre class="literal-block">
paster db clean -c /etc/ckan/default/production.ini
paster db load -c /etc/ckan/default/production.ini my_database_dump.sql
</pre>
</div>
<div class="section" id="exporting-datasets-to-json-or-csv">
<h4>Exporting Datasets to JSON or CSV<a class="headerlink" href="paster.html#exporting-datasets-to-json-or-csv" title="Permalink to this headline">¶</a></h4>
<p>You can export all of your CKAN site&#8217;s datasets from your database to a JSON file
using the <code class="docutils literal"><span class="pre">db</span> <span class="pre">simple-dump-json</span></code> command:</p>
<pre class="literal-block">
paster db simple-dump-json -c /etc/ckan/default/production.ini my_datasets.json
</pre>
<p>To export the datasets in CSV format instead, use <code class="docutils literal"><span class="pre">db</span> <span class="pre">simple-dump-csv</span></code>:</p>
<pre class="literal-block">
paster db simple-dump-csv -c /etc/ckan/default/production.ini my_datasets.csv
</pre>
<p>This is useful to create a simple public listing of the datasets, with no user
information. Some simple additions to the Apache config can serve the dump
files to users in a directory listing. To do this, add these lines to your
virtual Apache config file (e.g. /etc/apache2/sites-available/ckan_default):</p>
<div class="highlight-python"><div class="highlight"><pre>Alias /dump/ /home/okfn/var/srvc/ckan.net/dumps/

# Disable the mod_python handler for static files
&lt;Location /dump&gt;
    SetHandler None
    Options +Indexes
&lt;/Location&gt;
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Don&#8217;t serve an SQL dump of your database (created using the <code class="docutils literal"><span class="pre">paster</span> <span class="pre">db</span>
<span class="pre">dump</span></code> command), as those contain private user information such as email
addresses and API keys.</p>
</div>
</div>
<div class="section" id="exporting-user-accounts-to-csv">
<h4>Exporting User Accounts to CSV<a class="headerlink" href="paster.html#exporting-user-accounts-to-csv" title="Permalink to this headline">¶</a></h4>
<p>You can export all of your CKAN site&#8217;s user accounts from your database to a CSV file
using the <code class="docutils literal"><span class="pre">db</span> <span class="pre">user-dump-csv</span></code> command:</p>
<pre class="literal-block">
paster db user-dump-csv -c /etc/ckan/default/production.ini my_database_users.csv
</pre>
</div>
</div>
<div class="section" id="front-end-build-creates-and-minifies-css-and-javascript-files">
<h3>front-end-build: Creates and minifies css and JavaScript files<a class="headerlink" href="paster.html#front-end-build-creates-and-minifies-css-and-javascript-files" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">front</span><span class="o">-</span><span class="n">end</span><span class="o">-</span><span class="n">build</span>
</pre></div>
</div>
</div>
<div class="section" id="less-compile-all-root-less-documents-into-their-css-counterparts">
<span id="less"></span><h3>less: Compile all root less documents into their CSS counterparts<a class="headerlink" href="paster.html#less-compile-all-root-less-documents-into-their-css-counterparts" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">less</span>
</pre></div>
</div>
</div>
<div class="section" id="minify-create-minified-versions-of-the-given-javascript-and-css-files">
<h3>minify: Create minified versions of the given Javascript and CSS files<a class="headerlink" href="paster.html#minify-create-minified-versions-of-the-given-javascript-and-css-files" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>paster minify [--clean] PATH

For example:

paster minify ckan/public/base
paster minify ckan/public/base/css/*.css
paster minify ckan/public/base/css/red.css
</pre></div>
</div>
<p>If the &#8211;clean option is provided any minified files will be removed.</p>
</div>
<div class="section" id="notify-send-out-modification-notifications">
<h3>notify: Send out modification notifications<a class="headerlink" href="paster.html#notify-send-out-modification-notifications" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>notify replay    - send out modification signals. In &quot;replay&quot; mode,
                   an update signal is sent for each dataset in the database.
</pre></div>
</div>
</div>
<div class="section" id="plugin-info-provide-info-on-installed-plugins">
<h3>plugin-info: Provide info on installed plugins<a class="headerlink" href="paster.html#plugin-info-provide-info-on-installed-plugins" title="Permalink to this headline">¶</a></h3>
<p>As the name suggests, this commands shows you the installed plugins, their description, and which interfaces they implement</p>
</div>
<div class="section" id="profile-code-speed-profiler">
<h3>profile: Code speed profiler<a class="headerlink" href="paster.html#profile-code-speed-profiler" title="Permalink to this headline">¶</a></h3>
<p>Provide a ckan url and it will make the request and record how long each function call took in a file that can be read
by runsnakerun.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>profile URL
</pre></div>
</div>
<p>The result is saved in profile.data.search. To view the profile in runsnakerun:</p>
<div class="highlight-python"><div class="highlight"><pre>runsnakerun ckan.data.search.profile
</pre></div>
</div>
<p>You may need to install the cProfile python module.</p>
</div>
<div class="section" id="ratings-manage-dataset-ratings">
<h3>ratings: Manage dataset ratings<a class="headerlink" href="paster.html#ratings-manage-dataset-ratings" title="Permalink to this headline">¶</a></h3>
<p>Manages the ratings stored in the database, and can be used to count ratings, remove all ratings, or remove only anonymous ratings.</p>
<p>For example, to remove anonymous ratings from the database:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan ratings clean-anonymous --config=/etc/ckan/std/std.ini
</pre></div>
</div>
</div>
<div class="section" id="rdf-export-export-datasets-as-rdf">
<h3>rdf-export: Export datasets as RDF<a class="headerlink" href="paster.html#rdf-export-export-datasets-as-rdf" title="Permalink to this headline">¶</a></h3>
<p>This command dumps out all currently active datasets as RDF into the specified folder:</p>
<div class="highlight-python"><div class="highlight"><pre>paster rdf-export /path/to/store/output
</pre></div>
</div>
</div>
<div class="section" id="search-index-rebuild-search-index">
<span id="rebuild-search-index"></span><h3>search-index: Rebuild search index<a class="headerlink" href="paster.html#search-index-rebuild-search-index" title="Permalink to this headline">¶</a></h3>
<p>Rebuilds the search index. This is useful to prevent search indexes from getting out of sync with the main database.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan search-index rebuild --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>This default behaviour will clear the index and rebuild it with all datasets. If you want to rebuild it for only
one dataset, you can provide a dataset name:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan search-index rebuild test-dataset-name --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>Alternatively, you can use the <cite>-o</cite> or <cite>&#8211;only-missing</cite> option to only reindex datasets which are not
already indexed:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan search-index rebuild -o --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>If you don&#8217;t want to rebuild the whole index, but just refresh it, use the <cite>-r</cite> or <cite>&#8211;refresh</cite> option. This
won&#8217;t clear the index before starting rebuilding it:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan search-index rebuild -r --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>There is also an option available which works like the refresh option but tries to use all processes on the
computer to reindex faster:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan search-index rebuild_fast --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>There are other search related commands, mostly useful for debugging purposes:</p>
<div class="highlight-python"><div class="highlight"><pre>search-index check                  - checks for datasets not indexed
search-index show DATASET_NAME      - shows index of a dataset
search-index clear [DATASET_NAME]   - clears the search index for the provided dataset or for the whole ckan instance
</pre></div>
</div>
</div>
<div class="section" id="sysadmin-give-sysadmin-rights">
<h3>sysadmin: Give sysadmin rights<a class="headerlink" href="paster.html#sysadmin-give-sysadmin-rights" title="Permalink to this headline">¶</a></h3>
<p>Gives sysadmin rights to a named user. This means the user can perform any action on any object.</p>
<p>For example, to make a user called &#8216;admin&#8217; into a sysadmin:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan sysadmin add admin --config=/etc/ckan/std/std.ini
</pre></div>
</div>
</div>
<div class="section" id="tracking-update-tracking-statistics">
<h3>tracking: Update tracking statistics<a class="headerlink" href="paster.html#tracking-update-tracking-statistics" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>tracking update [start_date]       - update tracking stats
tracking export FILE [start_date]  - export tracking stats to a csv file
</pre></div>
</div>
</div>
<div class="section" id="trans-translation-helper-functions">
<h3>trans: Translation helper functions<a class="headerlink" href="paster.html#trans-translation-helper-functions" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>trans js      - generate the javascript translations
trans mangle  - mangle the zh_TW translations for testing
</pre></div>
</div>
</div>
<div class="section" id="user-create-and-manage-users">
<span id="paster-user"></span><h3>user: Create and manage users<a class="headerlink" href="paster.html#user-create-and-manage-users" title="Permalink to this headline">¶</a></h3>
<p>Lets you create, remove, list and manage users.</p>
<p>For example, to create a new user called &#8216;admin&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan user add admin --config=/etc/ckan/std/std.ini
</pre></div>
</div>
<p>To delete the &#8216;admin&#8217; user:</p>
<div class="highlight-python"><div class="highlight"><pre>paster --plugin=ckan user remove admin --config=/etc/ckan/std/std.ini
</pre></div>
</div>
</div>
</div>
</div>



        
        <div style="font-size:smaller;">
          <hr/>
          
            
          
            
              <div class="pull-right">
                <a href="authorization.html"
                  title="Authorization" accesskey="N">
                    
                      
                    
                    Authorization→
                </a>
              </div>
            
          
            
              <div >
                <a href="features.html"
                  title="Features" accesskey="P">
                    
                      
                    
                    ← Features
                </a>
              </div>
            
          
          <div style="clear:both;"></div>
        </div>

      </div>
    </div>
  </div> <!-- / row -->
</div>

<footer>
  <div class="inner">
    <div class="container-fluid">
      <p>An <a href="http://okfn.org">Open Knowledge Foundation</a> project.</p>

<p class="copyright">
  &copy; 2009-2012, <a href="http://okfn.org/">Open Knowledge Foundation</a>.
    Licensed under <a
    href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
    Attribution ShareAlike (Unported) v3.0 License</a>.<br />
    <img src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" alt="CC License Logo" />
    <a href="http://opendefinition.org/"><img src="http://assets.okfn.org/images/ok_buttons/oc_80x15_blue.png" border="0" 
      alt="{{ _('Open Content') }}" /></a>
  <br/>
</p>

<p>
<a href="https://github.com/okfn/ckan">Source</a>
&mdash;
<a href="https://github.com/okfn/ckan/issues">Issues</a>
&mdash;
<a href="http://lists.okfn.org/mailman/listinfo/ckan-dev">Mailing List</a>
&mdash;
<a href="http://twitter.com/CKANProject">Twitter @CKANProject</a>
</p>

<p>
Related Projects:
<a href="http://thedatahub.org/">The DataHub</a>
&mdash;
<a href="http://datacatalogs.org">DataCatalogs.org</a>
&mdash;
<a href="http://openspending.org">OpenSpending.org</a>
&mdash;
<a href="http://opendatahandbook.org">Open Data Handbook</a>
</p>

    </div>
  </div>
</footer>



  </body>
</html>