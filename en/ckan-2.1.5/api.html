<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The CKAN API &mdash; CKAN Documentation 2.1.5 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/fix.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/bootstrap-responsive.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnmedia.readthedocs.org/css/badge_only.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnmedia.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/underscore.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/doctools.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
    <script type="text/javascript" src="_static/bootstrap-css-tweaks.js"></script>
    <link rel="top" title="CKAN Documentation 2.1.5 documentation" href="index.html" />
    <link rel="next" title="Legacy APIs" href="legacy-api.html" />
    <link rel="prev" title="Theming" href="theming.html" />


<!-- RTD Extra Head -->



  
  <!-- 
  Always link to the latest version, as canonical.
  http://docs.readthedocs.org/en/latest/canonical.html
  -->
  <link rel="canonical" href="http://docs.ckan.org//en/latest/api.html" />
  

<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "ckan",
    version: "ckan-2.1.5",
    language: "en",
    page: "api",
    builder: "sphinx",
    theme: "sphinx-theme-okfn",
    docroot: "/doc/",
    source_suffix: ".rst",
    api_host: "https://readthedocs.org/",
    commit: "1d691ae3ba38a6b98dc69d0e2c16c71e186cd36e"
  }
  // Old variables
  var doc_version = "ckan-2.1.5";
  var doc_slug = "ckan";
  var page_name = "api";
  var html_theme = "sphinx-theme-okfn";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);


  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->
<!-- end RTD <extrahead> -->

  </head>
  <body role="document">
  
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        
        <a class="logo-icon pull-left" href="index.html"><img src="http://docs.ckan.org/en/ckan-2.1.5/_static/http://assets.okfn.org/p/opendatahandbook/img/data-wrench-inverted.png" alt="CKAN Documentation" /></a>
        
        <a class="brand" href="index.html">CKAN Documentation<span class="version"> v2.1.5</span></a>
        
        
        <a class="okfn-logo pull-right" href="http://okfn.org/" title="An Open Knowledge Foundation Project">
          <img src="https://s3.amazonaws.com/assets.okfn.org/p/okfn/img/logo_28x30.png" alt="Open Knowledge Foundation logo" />
        </a>
        
        
          
<form class="pull-right navbar-search" action="http://docs.ckan.org/en/ckan-2.1.5/search.html" method="get">
  <input type="text" name="q" placeholder="Search" class="search-query span2" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span4">
      <div class="well sidebar-nav">
        
          
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="theming.html"
                        title="previous chapter">Theming</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="legacy-api.html"
                        title="next chapter">Legacy APIs</a></p><div class="widget toc">
  <h3>Table of Contents</h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading.html">Upgrading CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-extensions.html">Writing Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="theming.html">Theming</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="api.html">The CKAN API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#making-an-api-request">Making an API Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#example-importing-datasets-with-the-ckan-api">Example: Importing Datasets with the CKAN API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#api-versions">API Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#authentication-and-api-keys">Authentication and API Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#get-able-api-functions">GET-able API Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#jsonp-support">JSONP Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#action-api-reference">Action API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api.html#ckan-logic-action-get">ckan.logic.action.get</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#ckan-logic-action-create">ckan.logic.action.create</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#ckan-logic-action-update">ckan.logic.action.update</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#ckan-logic-action-delete">ckan.logic.action.delete</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Testing CKAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Config File Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

</div>

        </div>
      </div>
        
      </div><!--/.well -->
    </div><!--/span-->
    <div class="span8">
      <div class="content">

        
        <div style="font-size:smaller;">
              <a href="index.html">CKAN Documentation 2.1.5 documentation</a> &raquo;
        </div>

        
  <div class="section" id="the-ckan-api">
<h1>The CKAN API<a class="headerlink" href="api.html#the-ckan-api" title="Permalink to this headline">Â¶</a></h1>
<p>CKAN&#8217;s <strong>Action API</strong> is a powerful, RPC-style API that exposes all of CKAN&#8217;s
core features to API clients. All of a CKAN website&#8217;s core functionality
(everything you can do with the web interface and more) can be used by external
code that calls the CKAN API.  For example, using the CKAN API your app can:</p>
<ul>
<li><p class="first">Get JSON-formatted lists of a site&#8217;s datasets, groups or other CKAN objects:</p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/package_list">http://demo.ckan.org/api/3/action/package_list</a></p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/group_list">http://demo.ckan.org/api/3/action/group_list</a></p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/tag_list">http://demo.ckan.org/api/3/action/tag_list</a></p>
</li>
<li><p class="first">Get a full JSON representation of a dataset, resource or other object:</p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/package_show?id=adur_district_spending">http://demo.ckan.org/api/3/action/package_show?id=adur_district_spending</a></p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/tag_show?id=gold">http://demo.ckan.org/api/3/action/tag_show?id=gold</a></p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/group_show?id=data-explorer">http://demo.ckan.org/api/3/action/group_show?id=data-explorer</a></p>
</li>
<li><p class="first">Search for packages or resources matching a query:</p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/package_search?q=spending">http://demo.ckan.org/api/3/action/package_search?q=spending</a></p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/resource_search?query=name:District%20Names">http://demo.ckan.org/api/3/action/resource_search?query=name:District%20Names</a></p>
</li>
<li><p class="first">Create, update and delete datasets, resources and other objects</p>
</li>
<li><p class="first">Get an activity stream of recently changed datasets on a site:</p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/recently_changed_packages_activity_list">http://demo.ckan.org/api/3/action/recently_changed_packages_activity_list</a></p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>CKAN&#8217;s FileStore and DataStore have their own APIs, see:</p>
<ul class="last simple">
<li><a class="reference internal" href="filestore.html"><em>FileStore and File Uploads</em></a></li>
<li><a class="reference internal" href="datastore.html"><em>DataStore Extension</em></a></li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For documentation of CKAN&#8217;s legacy API&#8217;s, see <a class="reference internal" href="legacy-api.html"><em>Legacy APIs</em></a>.</p>
</div>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="making-an-api-request">
<h2>Making an API Request<a class="headerlink" href="api.html#making-an-api-request" title="Permalink to this headline">Â¶</a></h2>
<p>To call the CKAN API, post a JSON dictionary in an HTTP POST request to one of
CKAN&#8217;s API URLs. The parameters for the API function should be given in the
JSON dictionary. CKAN will also return its response in a JSON dictionary.</p>
<p>One way to post a JSON dictionary to a URL is using the command-line HTTP
client <a class="reference external" href="http://httpie.org/">HTTPie</a>.  For example, to get a list of the names
of all the datasets in the <code class="docutils literal"><span class="pre">data-explorer</span></code> group on demo.ckan.org, install
HTTPie and then call the <code class="docutils literal"><span class="pre">group_list</span></code> API function by running this command
in a terminal:</p>
<div class="highlight-python"><div class="highlight"><pre>http http://demo.ckan.org/api/3/action/group_list id=data-explorer
</pre></div>
</div>
<p>The response from CKAN will look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;help&quot;</span><span class="p">:</span> <span class="s">&quot;...&quot;</span><span class="p">,</span>
    <span class="s">&quot;result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s">&quot;data-explorer&quot;</span><span class="p">,</span>
        <span class="s">&quot;department-of-ricky&quot;</span><span class="p">,</span>
        <span class="s">&quot;geo-examples&quot;</span><span class="p">,</span>
        <span class="s">&quot;geothermal-data&quot;</span><span class="p">,</span>
        <span class="s">&quot;reykjavik&quot;</span><span class="p">,</span>
        <span class="s">&quot;skeenawild-conservation-trust&quot;</span>
    <span class="p">],</span>
    <span class="s">&quot;success&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The response is a JSON dictionary with three keys:</p>
<ol class="arabic">
<li><p class="first"><code class="docutils literal"><span class="pre">&quot;sucess&quot;</span></code>: <code class="docutils literal"><span class="pre">true</span></code> or <code class="docutils literal"><span class="pre">false</span></code>.</p>
<p>The API aims to always return <code class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></code> as the status code of its HTTP
response, whether there were errors with the request or not, so it&#8217;s
important to always check the value of the <code class="docutils literal"><span class="pre">&quot;success&quot;</span></code> key in the response
dictionary and (if success is <code class="docutils literal"><span class="pre">False</span></code>) check the value of the <code class="docutils literal"><span class="pre">&quot;error&quot;</span></code>
key.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If there are major formatting problems with a request to the API, CKAN
may still return an HTTP response with a <code class="docutils literal"><span class="pre">409</span></code>, <code class="docutils literal"><span class="pre">400</span></code> or <code class="docutils literal"><span class="pre">500</span></code>
status code (in increasing order of severity). In future CKAN versions
we intend to remove these responses, and instead send a <code class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></code>
response and use the <code class="docutils literal"><span class="pre">&quot;success&quot;</span></code> and <code class="docutils literal"><span class="pre">&quot;error&quot;</span></code> items.</p>
</div>
<ol class="arabic" start="2">
<li><p class="first"><code class="docutils literal"><span class="pre">&quot;result&quot;</span></code>: the returned result from the function you called. The type
and value of the result depend on which function you called. In the case of
the <code class="docutils literal"><span class="pre">group_list</span></code> function it&#8217;s a list of strings, the names of all the
datasets that belong to the group.</p>
<p>If there was an error responding to your request, the dictionary will
contain an <code class="docutils literal"><span class="pre">&quot;error&quot;</span></code> key with details of the error instead of the
<code class="docutils literal"><span class="pre">&quot;result&quot;</span></code> key. A response dictionary containing an error will look like
this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;help&quot;</span><span class="p">:</span> <span class="s">&quot;Creates a package&quot;</span><span class="p">,</span>
    <span class="s">&quot;success&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s">&quot;error&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&quot;message&quot;</span><span class="p">:</span> <span class="s">&quot;Access denied&quot;</span><span class="p">,</span>
        <span class="s">&quot;__type&quot;</span><span class="p">:</span> <span class="s">&quot;Authorization Error&quot;</span>
        <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">&quot;help&quot;</span></code>: the documentation string for the function you called.</p>
</li>
</ol>
<p>The same HTTP request can be made using Python&#8217;s standard <code class="docutils literal"><span class="pre">urllib2</span></code> module,
with this Python code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pprint</span>

<span class="c"># Use the json module to dump a dictionary to a string for posting.</span>
<span class="n">data_string</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;data-explorer&#39;</span><span class="p">}))</span>

<span class="c"># Make the HTTP request.</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s">&#39;http://demo.ckan.org/api/3/action/group_list&#39;</span><span class="p">,</span>
        <span class="n">data_string</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="mi">200</span>

<span class="c"># Use the json module to load CKAN&#39;s response into a dictionary.</span>
<span class="n">response_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

<span class="c"># Check the contents of the response.</span>
<span class="k">assert</span> <span class="n">response_dict</span><span class="p">[</span><span class="s">&#39;success&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">response_dict</span><span class="p">[</span><span class="s">&#39;result&#39;</span><span class="p">]</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="example-importing-datasets-with-the-ckan-api">
<h2>Example: Importing Datasets with the CKAN API<a class="headerlink" href="api.html#example-importing-datasets-with-the-ckan-api" title="Permalink to this headline">Â¶</a></h2>
<p>You can add datasets using CKAN&#8217;s web interface, but when importing many
datasets it&#8217;s usually more efficient to automate the process in some way.  In
this example, we&#8217;ll show you how to use the CKAN API to write a Python script
to import datasets into CKAN.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Make this script more interesting (eg. read data from a CSV file), and all
put the script in a .py file somewhere with tests and import it here.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pprint</span>

<span class="c"># Put the details of the dataset we&#39;re going to create into a dict.</span>
<span class="n">dataset_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;my_dataset_name&#39;</span><span class="p">,</span>
    <span class="s">&#39;notes&#39;</span><span class="p">:</span> <span class="s">&#39;A long description of my dataset&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c"># Use the json module to dump the dictionary to a string for posting.</span>
<span class="n">data_string</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">dataset_dict</span><span class="p">))</span>

<span class="c"># We&#39;ll use the package_create function to create a new dataset.</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span>
    <span class="s">&#39;http://www.my_ckan_site.com/api/action/package_create&#39;</span><span class="p">)</span>

<span class="c"># Creating a dataset requires an authorization header.</span>
<span class="c"># Replace *** with your API key, from your user account on the CKAN site</span>
<span class="c"># that you&#39;re creating the dataset on.</span>
<span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&#39;Authorization&#39;</span><span class="p">,</span> <span class="s">&#39;***&#39;</span><span class="p">)</span>

<span class="c"># Make the HTTP request.</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data_string</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="mi">200</span>

<span class="c"># Use the json module to load CKAN&#39;s response into a dictionary.</span>
<span class="n">response_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="k">assert</span> <span class="n">response_dict</span><span class="p">[</span><span class="s">&#39;success&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span>

<span class="c"># package_create returns the created package as its result.</span>
<span class="n">created_package</span> <span class="o">=</span> <span class="n">response_dict</span><span class="p">[</span><span class="s">&#39;result&#39;</span><span class="p">]</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">created_package</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="api-versions">
<h2>API Versions<a class="headerlink" href="api.html#api-versions" title="Permalink to this headline">Â¶</a></h2>
<p>The CKAN APIs are versioned. If you make a request to an API URL without a
version number, CKAN will choose the latest version of the API:</p>
<div class="highlight-python"><div class="highlight"><pre>http://demo.ckan.org/api/action/package_list
</pre></div>
</div>
<p>Alternatively, you can specify the desired API version number in the URL that
you request:</p>
<div class="highlight-python"><div class="highlight"><pre>http://demo.ckan.org/api/3/action/package_list
</pre></div>
</div>
<p>Version 3 is currently the only version of the Action API.</p>
<p>We recommend that you specify the API number in your requests, because this
ensures that your API client will work across different sites running different
version of CKAN (and will keep working on the same sites, when those sites
upgrade to new versions of CKAN). Because the latest version of the API may
change when a site is upgraded to a new version of CKAN, or may differ on
different sites running different versions of CKAN, the result of an API
request that doesn&#8217;t specify the API version number cannot be relied on.</p>
</div>
<div class="section" id="authentication-and-api-keys">
<h2>Authentication and API Keys<a class="headerlink" href="api.html#authentication-and-api-keys" title="Permalink to this headline">Â¶</a></h2>
<p>Some API functions require authorization. The API uses the same authorization
functions and configuration as the web interface, so if a user is authorized to
do something in the web interface they&#8217;ll be authorized to do it via the API as
well.</p>
<p>When calling an API function that requires authorization, you must authenticate
yourself by providing your API key with your HTTP request. To find your API
key, login to the CKAN site using its web interface and visit your user profile
page.</p>
<p>To provide your API key in an HTTP request, include it in either an
<code class="docutils literal"><span class="pre">Authorization</span></code> or <code class="docutils literal"><span class="pre">X-CKAN-API-Key</span></code> header.  (The name of the HTTP header
can be configured with the <code class="docutils literal"><span class="pre">apikey_header_name</span></code> option in your CKAN
configuration file.)</p>
<p>For example, to ask whether or not you&#8217;re currently following the user
<code class="docutils literal"><span class="pre">markw</span></code> on demo.ckan.org using HTTPie, run this command:</p>
<div class="highlight-python"><div class="highlight"><pre>http http://demo.ckan.org/api/3/action/am_following_user id=markw Authorization:XXX
</pre></div>
</div>
<p>(Replacing <code class="docutils literal"><span class="pre">XXX</span></code> with your API key.)</p>
<p>Or, to get the list of activities from your user dashboard on demo.ckan.org,
run this Python code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="s">&#39;http://demo.ckan.org/api/3/action/dashboard_activity_list&#39;</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&#39;Authorization&#39;</span><span class="p">,</span> <span class="s">&#39;XXX&#39;</span><span class="p">)</span>
<span class="n">response_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;{}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="get-able-api-functions">
<h2>GET-able API Functions<a class="headerlink" href="api.html#get-able-api-functions" title="Permalink to this headline">Â¶</a></h2>
<p>Functions defined in <a class="reference internal" href="api.html#ckan-logic-action-get">ckan.logic.action.get</a> can also be called with an HTTP
GET request.  For example, to get the list of datasets (packages) from
demo.ckan.org, open this URL in your browser:</p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/package_list">http://demo.ckan.org/api/3/action/package_list</a></p>
<p>Or, to search for datasets (packages) matching the search query <code class="docutils literal"><span class="pre">spending</span></code>,
on demo.ckan.org, open this URL in your browser:</p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/package_search?q=spending">http://demo.ckan.org/api/3/action/package_search?q=spending</a></p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Browser plugins like <a class="reference external" href="https://addons.mozilla.org/en-us/firefox/addon/jsonview/">JSONView for Firefox</a>
or <a class="reference external" href="https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc">Chrome</a>
will format and color CKAN&#8217;s JSON response nicely in your browser.</p>
</div>
<p>The search query is given as a URL parameter <code class="docutils literal"><span class="pre">?q=spending</span></code>. Multiple
URL parameters can be appended, separated by <code class="docutils literal"><span class="pre">&amp;</span></code> characters, for example
to get only the first 10 matching datasets open this URL:</p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/package_search?q=spending&amp;rows=10">http://demo.ckan.org/api/3/action/package_search?q=spending&amp;rows=10</a></p>
<p>When an action requires a list of strings as the value of a parameter, the
value can be sent by giving the parameter multiple times in the URL:</p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/term_translation_show?terms=russian&amp;terms=romantic%20novel">http://demo.ckan.org/api/3/action/term_translation_show?terms=russian&amp;terms=romantic%20novel</a></p>
</div>
<div class="section" id="jsonp-support">
<h2>JSONP Support<a class="headerlink" href="api.html#jsonp-support" title="Permalink to this headline">Â¶</a></h2>
<p>To cater for scripts from other sites that wish to access the API, the data can
be returned in JSONP format, where the JSON data is &#8216;padded&#8217; with a function
call. The function is named in the &#8216;callback&#8217; parameter. For example:</p>
<p><a class="reference external" href="http://demo.ckan.org/api/3/action/package_show?id=adur_district_spending&amp;callback=myfunction">http://demo.ckan.org/api/3/action/package_show?id=adur_district_spending&amp;callback=myfunction</a></p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">This doesn&#8217;t work with all functions.</p>
</div>
</div>
<div class="section" id="action-api-reference">
<span id="api-reference"></span><h2>Action API Reference<a class="headerlink" href="api.html#action-api-reference" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="ckan-logic-action-get">
<h3>ckan.logic.action.get<a class="headerlink" href="api.html#ckan-logic-action-get" title="Permalink to this headline">Â¶</a></h3>
</div>
<div class="section" id="ckan-logic-action-create">
<h3>ckan.logic.action.create<a class="headerlink" href="api.html#ckan-logic-action-create" title="Permalink to this headline">Â¶</a></h3>
</div>
<div class="section" id="ckan-logic-action-update">
<h3>ckan.logic.action.update<a class="headerlink" href="api.html#ckan-logic-action-update" title="Permalink to this headline">Â¶</a></h3>
</div>
<div class="section" id="ckan-logic-action-delete">
<h3>ckan.logic.action.delete<a class="headerlink" href="api.html#ckan-logic-action-delete" title="Permalink to this headline">Â¶</a></h3>
</div>
</div>
</div>



        
        <div style="font-size:smaller;">
          <hr/>
          
            
          
            
              <div class="pull-right">
                <a href="legacy-api.html"
                  title="Legacy APIs" accesskey="N">
                    
                      
                    
                    Legacy APIsâ
                </a>
              </div>
            
          
            
              <div >
                <a href="theming.html"
                  title="Theming" accesskey="P">
                    
                      
                    
                    â Theming
                </a>
              </div>
            
          
          <div style="clear:both;"></div>
        </div>

      </div>
    </div>
  </div> <!-- / row -->
</div>

<footer>
  <div class="inner">
    <div class="container-fluid">
      <p>An <a href="http://okfn.org">Open Knowledge Foundation</a> project.</p>

<p class="copyright">
  &copy; 2009-2012, <a href="http://okfn.org/">Open Knowledge Foundation</a>.
    Licensed under <a
    href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
    Attribution ShareAlike (Unported) v3.0 License</a>.<br />
    <img src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" alt="CC License Logo" />
    <a href="http://opendefinition.org/"><img src="http://assets.okfn.org/images/ok_buttons/oc_80x15_blue.png" border="0" 
      alt="{{ _('Open Content') }}" /></a>
  <br/>
</p>

<p>
<a href="https://github.com/okfn/ckan">Source</a>
&mdash;
<a href="https://github.com/okfn/ckan/issues">Issues</a>
&mdash;
<a href="http://lists.okfn.org/mailman/listinfo/ckan-dev">Mailing List</a>
&mdash;
<a href="http://twitter.com/CKANProject">Twitter @CKANProject</a>
</p>

<p>
Related Projects:
<a href="http://thedatahub.org/">The DataHub</a>
&mdash;
<a href="http://datacatalogs.org">DataCatalogs.org</a>
&mdash;
<a href="http://openspending.org">OpenSpending.org</a>
&mdash;
<a href="http://opendatahandbook.org">Open Data Handbook</a>
</p>

    </div>
  </div>
</footer>



  </body>
</html>