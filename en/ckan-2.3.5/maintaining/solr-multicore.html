

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Multicore Solr setup &mdash; CKAN 2.3.5 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  
    <link rel="top" title="CKAN 2.3.5 documentation" href="../index.html"/>
        <link rel="up" title="Maintainerâ€™s guide" href="index.html"/>
        <link rel="next" title="API guide" href="../api/index.html"/>
        <link rel="prev" title="Config File Options" href="configuration.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>


<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://docs.ckan.org/en/latest/maintaining/solr-multicore.html" />

<link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'maintaining/solr-multicore'
</script>

<script type="text/javascript" src="../_static/readthedocs-dynamic-include.js"></script>

<!-- end RTD <extrahead> --></head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../contents.html" class="fa fa-home"> CKAN</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="http://docs.ckan.org/en/ckan-2.3.5/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide.html">User guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user-guide.html#what-is-ckan">What is CKAN?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide.html#using-ckan">Using CKAN</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sysadmin-guide.html">Sysadmin guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sysadmin-guide.html#creating-a-sysadmin-account">Creating a sysadmin account</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysadmin-guide.html#customizing-look-and-feel">Customizing look and feel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysadmin-guide.html#managing-organizations-and-datasets">Managing organizations and datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysadmin-guide.html#permanently-deleting-datasets">Permanently deleting datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysadmin-guide.html#managing-users">Managing users</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Maintainer&#8217;s guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installing/index.html">Installing CKAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrading/index.html">Upgrading CKAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="paster.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="authorization.html">Organizations and authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-viewer.html">Data preview and visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="filestore.html">FileStore and file uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html">DataStore extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="apps-ideas.html">Apps &amp; Ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="tag-vocabularies.html">Tag Vocabularies</a></li>
<li class="toctree-l2"><a class="reference internal" href="form-integration.html">Form Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="linked-data-and-rdf.html">Linked Data and RDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="background-tasks.html">Background tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="email-notifications.html">Email notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracking.html">Page View Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="multilingual.html">Multilingual Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats.html">Stats Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Config File Options</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="solr-multicore.html">Multicore Solr setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/legacy-api.html">Legacy APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#making-an-api-request">Making an API request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#example-importing-datasets-with-the-ckan-api">Example: Importing datasets with the CKAN API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#api-versions">API versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#authentication-and-api-keys">Authentication and API keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#get-able-api-functions">GET-able API functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#jsonp-support">JSONP support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#api-examples">API Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#action-api-reference">Action API reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extensions/index.html">Extending guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extensions/tutorial.html">Writing extensions tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/custom-config-settings.html">Using custom config settings in extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/testing-extensions.html">Testing extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/best-practices.html">Best practices for writing extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/adding-custom-fields.html">Customizing dataset and resource metadata fields using IDatasetForm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/plugin-interfaces.html">Plugin interfaces reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/plugins-toolkit.html">Plugins toolkit reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/validators.html">Validator functions reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../theming/index.html">Theming guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../theming/templates.html">Customizing CKAN&#8217;s templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/static-files.html">Adding static files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/css.html">Customizing CKAN&#8217;s CSS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/fanstatic.html">Adding CSS and JavaScript files using Fanstatic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/javascript.html">Customizing CKAN&#8217;s JavaScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/best-practices.html">Best practices for writing CKAN themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/jinja-tags.html">Custom Jinja2 tags reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/variables-and-functions.html">Variables and functions available to templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/javascript-module-objects-and-methods.html">Objects and methods available to JavaScript modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/template-helper-functions.html">Template helper functions reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/template-snippets.html">Template snippets reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/javascript-sandbox.html">JavaScript sandbox reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/javascript-api-client.html">JavaScript API client reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/jquery-plugins.html">CKAN jQuery plugins reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/issues.html">Reporting issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/i18n.html">Translating CKAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/test.html">Testing CKAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/commit-messages.html">Writing commit messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/pull-requests.html">Making a pull request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/reviewing.html">Reviewing and merging a pull request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/documentation.html">Writing documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/simple-code-contributions.html">Projects for beginner CKAN developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/architecture.html">CKAN code architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/css.html">CSS coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/html.html">HTML coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/javascript.html">JavaScript coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/python.html">Python coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/string-i18n.html">String internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/testing.html">Testing coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/frontend/index.html">Frontend development guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/database-migrations.html">Database migrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/upgrading-dependencies.html">Upgrading CKAN&#8217;s dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/release-process.html">Doing a CKAN release</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../contents.html">CKAN</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../contents.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Maintainer&#8217;s guide</a> &raquo;</li>
      
    <li>Multicore Solr setup</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://github.com/ckan/ckan/blob/ckan-2.3.5/doc/maintaining/solr-multicore.rst" class="fa fa-github"> Edit on GitHub</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="multicore-solr-setup">
<span id="id1"></span><h1>Multicore Solr setup<a class="headerlink" href="solr-multicore.html#multicore-solr-setup" title="Permalink to this headline">Â¶</a></h1>
<p>Solr can be set up to have multiple configurations and search indexes on the
same machine. Each configuration is called a Solr <em>core</em>. Having multiple cores
is useful when you want different applications or different versions of CKAN to
share the same Solr instance, each application can have its own Solr core so
each can use a different <tt class="docutils literal"><span class="pre">schema.xml</span></tt> file. This is necessary, for example,
if you want two CKAN instances to share the same Solr server and those two
instances are running different versions of CKAN that require different
<tt class="docutils literal"><span class="pre">schema.xml</span></tt> files, or if the two instances have different Solr schema
customizations.</p>
<p>Each Solr core in a multicore setup will have a different URL, for example:</p>
<div class="highlight-python"><div class="highlight"><pre>http://localhost:8983/solr/ckan_default
http://localhost:8983/solr/some_other_site
</pre></div>
</div>
<p>This section will show you how to create a multicore Solr setup and create
your first core. If you already have a multicore setup and now you&#8217;ve setup a
second CKAN instance on the same machine and want to create a second Solr
core for it, see <a class="reference internal" href="solr-multicore.html#creating-another-solr-core"><em>Creating another Solr core</em></a>.</p>
<ol class="arabic">
<li><p class="first">Create the file <tt class="docutils literal"><span class="pre">/usr/share/solr/solr.xml</span></tt>, with the following contents:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;solr persistent=&quot;true&quot; sharedLib=&quot;lib&quot;&gt;
    &lt;cores adminPath=&quot;/admin/cores&quot;&gt;
        &lt;core name=&quot;ckan_default&quot; instanceDir=&quot;ckan_default&quot;&gt;
            &lt;property name=&quot;dataDir&quot; value=&quot;/var/lib/solr/data/ckan_default&quot; /&gt;
        &lt;/core&gt;
    &lt;/cores&gt;
&lt;/solr&gt;
</pre></div>
</div>
<p>This file lists the different Solr cores, in this example we have just a
single core called <tt class="docutils literal"><span class="pre">ckan_default</span></tt>.</p>
</li>
<li><p class="first">Create the data directory for your Solr core, run this command in a
terminal:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo -u jetty mkdir /var/lib/solr/data/ckan_default
</pre></div>
</div>
<p>This is the directory where Solr will store the search index files for
our core.</p>
</li>
<li><p class="first">Create the directory <tt class="docutils literal"><span class="pre">/etc/solr/ckan_default</span></tt>, and move the
<tt class="docutils literal"><span class="pre">/etc/solr/conf</span></tt> directory into it:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo mkdir /etc/solr/ckan_default
sudo mv /etc/solr/conf /etc/solr/ckan_default/
</pre></div>
</div>
<p>This directory holds the configuration files for your Solr core.</p>
</li>
<li><p class="first">Replace the <tt class="docutils literal"><span class="pre">/etc/solr/ckan_default/schema.xml</span></tt> file with a symlink to
CKAN&#8217;s <tt class="docutils literal"><span class="pre">schema.xml</span></tt> file:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo mv /etc/solr/ckan_default/conf/schema.xml /etc/solr/ckan_default/conf/schema.xml.bak
sudo ln -s /usr/lib/ckan/default/src/ckan/ckan/config/solr/schema.xml /etc/solr/ckan_default/conf/schema.xml
</pre></div>
</div>
</li>
<li><p class="first">Edit <tt class="docutils literal"><span class="pre">/etc/solr/ckan_default/conf/solrconfig.xml</span></tt> and change the
<tt class="docutils literal"><span class="pre">&lt;dataDir&gt;</span></tt> tag to this:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;dataDir&gt;${dataDir}&lt;/dataDir&gt;
</pre></div>
</div>
<p>This configures our <tt class="docutils literal"><span class="pre">ckan_default</span></tt> core to use the data directory you
specified for it in <tt class="docutils literal"><span class="pre">solr.xml</span></tt>.</p>
</li>
<li><p class="first">Create the directory <tt class="docutils literal"><span class="pre">/usr/share/solr/ckan_default</span></tt> and put a symlink
to the <tt class="docutils literal"><span class="pre">conf</span></tt> directory in it:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo mkdir /usr/share/solr/ckan_default
sudo ln -s /etc/solr/ckan_default/conf /usr/share/solr/ckan_default/conf
</pre></div>
</div>
</li>
<li><p class="first">Restart Solr:</p>
<pre class="literal-block">
sudo service jetty restart
</pre>
<p>You should now see your newly created <tt class="docutils literal"><span class="pre">ckan_default</span></tt> core if you open
<a class="reference external" href="http://localhost:8983/solr/ckan_default/admin/">http://localhost:8983/solr/ckan_default/admin/</a> in your web browser.
You can click on the <em>schema</em> link on this page to check that the core is
using the right schema (you should see <tt class="docutils literal"><span class="pre">&lt;schema</span> <span class="pre">name=&quot;ckan&quot;</span> <span class="pre">version=&quot;2.0&quot;&gt;</span></tt>
near the top of the <tt class="docutils literal"><span class="pre">schema.xml</span></tt> file). The <a class="reference external" href="http://localhost:8983/solr/">http://localhost:8983/solr/</a>
page will list all of your configured Solr cores.</p>
</li>
<li><p class="first">Finally, change the <tt class="docutils literal"><span class="pre">solr_url</span></tt> setting in your /etc/ckan/default/development.ini or
/etc/ckan/default/production.ini file to point to your new Solr core, for example:</p>
<div class="highlight-python"><div class="highlight"><pre>solr_url = http://127.0.0.1:8983/solr/ckan_default
</pre></div>
</div>
</li>
</ol>
<p>If you have trouble when setting up Solr, see
<a class="reference internal" href="solr-multicore.html#multicore-solr-troubleshooting"><em>Multicore Solr setup troubleshooting</em></a> below.</p>
<div class="section" id="creating-another-solr-core">
<span id="id2"></span><h2>Creating another Solr core<a class="headerlink" href="solr-multicore.html#creating-another-solr-core" title="Permalink to this headline">Â¶</a></h2>
<p>In this example we&#8217;ll assume that:</p>
<ol class="arabic simple">
<li>You&#8217;ve followed the instructions in <a class="reference internal" href="solr-multicore.html#multicore-solr-setup"><em>Multicore Solr setup</em></a> to create
a multicore setup and create your first core for your first CKAN instance.</li>
<li>You&#8217;ve installed a second instance of CKAN in a second virtual environment
at /usr/lib/ckan/my-second-ckan-instance, and now want to setup a second Solr core for it.</li>
</ol>
<p>You can of course follow these instructions again to setup further Solr cores.</p>
<ol class="arabic">
<li><p class="first">Add the core to <tt class="docutils literal"><span class="pre">/usr/share/solr/solr.xml</span></tt>. This file should now list
two cores. For example:</p>
<pre class="literal-block">
&lt;solr persistent=&quot;true&quot; sharedLib=&quot;lib&quot;&gt;
    &lt;cores adminPath=&quot;/admin/cores&quot;&gt;
        &lt;core name=&quot;ckan_default&quot; instanceDir=&quot;ckan_default&quot;&gt;
            &lt;property name=&quot;dataDir&quot; value=&quot;/var/lib/solr/data/ckan_default&quot; /&gt;
        &lt;/core&gt;
        &lt;core name=&quot;my-second-solr-core&quot; instanceDir=&quot;my-second-solr-core&quot;&gt;
            &lt;property name=&quot;dataDir&quot; value=&quot;/var/lib/solr/data/my-second-solr-core&quot; /&gt;
        &lt;/core&gt;
    &lt;/cores&gt;
&lt;/solr&gt;
</pre>
</li>
<li><p class="first">Create the data directory for your new core:</p>
<pre class="literal-block">
sudo -u jetty mkdir /var/lib/solr/data/my-second-solr-core
</pre>
</li>
<li><p class="first">Create the configuration directory for your new core, and copy the config
from your first core into it:</p>
<pre class="literal-block">
sudo mkdir /etc/solr/my-second-solr-core
sudo cp -R /etc/solr/ckan_default/conf /etc/solr/my-second-solr-core/
</pre>
</li>
<li><p class="first">Replace the /etc/solr/my-second-solr-core/schema.xml file with a symlink to the
<tt class="docutils literal"><span class="pre">schema.xml</span></tt> file from your second CKAN instance:</p>
<pre class="literal-block">
sudo rm /etc/solr/my-second-solr-core/conf/schema.xml
sudo ln -s /usr/lib/ckan/my-second-ckan-instance/src/ckan/ckan/config/solr/schema.xml /etc/solr/my-second-solr-core/conf/schema.xml
</pre>
</li>
<li><p class="first">Create the /usr/share/solr/my-second-solr-core directory and put a symlink to the
<tt class="docutils literal"><span class="pre">conf</span></tt> directory in it:</p>
<pre class="literal-block">
sudo mkdir /usr/share/solr/my-second-solr-core
sudo ln -s /etc/solr/my-second-solr-core/conf /usr/share/solr/my-second-solr-core/conf
</pre>
</li>
<li><p class="first">Restart Solr:</p>
<pre class="literal-block">
sudo service jetty restart
</pre>
<p>You should now see both your Solr cores when you open
<a class="reference external" href="http://localhost:8983/solr/">http://localhost:8983/solr/</a> in your web browser.</p>
</li>
<li><p class="first">Finally, change the <a class="reference internal" href="configuration.html#solr-url"><em>solr_url</em></a> setting in your
/etc/ckan/my-second-ckan-instance/development.ini or /etc/ckan/my-second-ckan-instance/production.ini file to
point to your new Solr core:</p>
<pre class="literal-block">
solr_url = <a class="reference external" href="http://127.0.0.1:8983/solr/">http://127.0.0.1:8983/solr/</a>my-second-solr-core
</pre>
</li>
</ol>
<p>If you have trouble when setting up Solr, see
<a class="reference internal" href="solr-multicore.html#multicore-solr-troubleshooting"><em>Multicore Solr setup troubleshooting</em></a>.</p>
</div>
<div class="section" id="multicore-solr-setup-troubleshooting">
<span id="multicore-solr-troubleshooting"></span><h2>Multicore Solr setup troubleshooting<a class="headerlink" href="solr-multicore.html#multicore-solr-setup-troubleshooting" title="Permalink to this headline">Â¶</a></h2>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="installing/install-from-source.html#solr-troubleshooting"><em>Troubleshooting for single-core Solr setups</em></a></dt>
<dd>Most of these tips also apply to multi-core setups.</dd>
</dl>
</div>
<div class="section" id="no-cores-shown-on-solr-index-page">
<h3>No cores shown on Solr index page<a class="headerlink" href="solr-multicore.html#no-cores-shown-on-solr-index-page" title="Permalink to this headline">Â¶</a></h3>
<p>If no cores are shown when you visit the Solr index page, and the admin
interface returns a 404 error, check the web server error log
(<tt class="docutils literal"><span class="pre">/var/log/jetty/&lt;date&gt;.stderrout.log</span></tt> if you&#8217;re using Jetty, or
<tt class="docutils literal"><span class="pre">/var/log/tomcat6/catalina.&lt;date&gt;.log</span></tt> for Tomcat). If you can find an error
similar to this one:</p>
<div class="highlight-python"><div class="highlight"><pre>WARNING: [iatiregistry.org] Solr index directory &#39;/usr/share/solr/iatiregistry.org/data/index&#39; doesn&#39;t exist. Creating new index...
07-Dec-2011 18:06:33 org.apache.solr.common.SolrException log
SEVERE: java.lang.RuntimeException: Cannot create directory: /usr/share/solr/iatiregistry.org/data/index
[...]
</pre></div>
</div>
<p>Then <tt class="docutils literal"><span class="pre">dataDir</span></tt> is not properly configured. With our setup the data directory
should be under <tt class="docutils literal"><span class="pre">/var/lib/solr/data</span></tt>. Make sure that you defined the correct
<tt class="docutils literal"><span class="pre">dataDir</span></tt> in the <tt class="docutils literal"><span class="pre">solr.xml</span></tt> file and that in the <tt class="docutils literal"><span class="pre">solrconfig.xml</span></tt> file
you have the following configuration option:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;dataDir&gt;${dataDir}&lt;/dataDir&gt;
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation"
         aria-label="footer navigation">
      
        <a href="../api/index.html" class="btn btn-neutral float-right"
           title="API guide"/>
           Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="configuration.html" class="btn btn-neutral"
           title="Config File Options">
           <span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr></hr>

  <p>An <a href="http://okfn.org">Open Knowledge Foundation</a> project.</p>

  <p class="copyright">
      &copy; 2009-2013, <a href="http://okfn.org/">Open Knowledge Foundation</a>.
    Licensed under <a
    href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
    Attribution ShareAlike (Unported) v3.0 License</a>.<br />
    <img src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" alt="CC License Logo" />
    <a href="http://opendefinition.org/"><img src="http://assets.okfn.org/images/ok_buttons/oc_80x15_blue.png" border="0"
      alt="{{ _('Open Content') }}" /></a>
  
  </p>

  <p>
    <a href="https://github.com/ckan/ckan">Source</a>
    &mdash;
    <a href="https://github.com/ckan/ckan/issues">Issues</a>
    &mdash;
    <a href="http://lists.okfn.org/mailman/listinfo/ckan-dev">Mailing List</a>
    &mdash;
    <a href="http://twitter.com/CKANProject">Twitter @CKANProject</a>
  </p>

  <p>
    Related Projects:
    <a href="http://thedatahub.org/">The DataHub</a>
    &mdash;
    <a href="http://datacatalogs.org">DataCatalogs.org</a>
    &mdash;
    <a href="http://openspending.org">OpenSpending.org</a>
    &mdash;
    <a href="http://opendatahandbook.org">Open Data Handbook</a>
  </p>


  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a>  provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: ckan-2.3.5
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../../../index.html">latest</a></dd>
        
          <dd><a href="../../ckan-2.6.0/index.html">ckan-2.6.0</a></dd>
        
          <dd><a href="../../ckan-2.5.3/index.html">ckan-2.5.3</a></dd>
        
          <dd><a href="../../ckan-2.4.4/index.html">ckan-2.4.4</a></dd>
        
          <dd><a href="../index.html">ckan-2.3.5</a></dd>
        
          <dd><a href="../../ckan-2.2.3/index.html">ckan-2.2.3</a></dd>
        
          <dd><a href="../../ckan-2.1.5/index.html">ckan-2.1.5</a></dd>
        
          <dd><a href="http://docs.ckan.org/en/ckan-2.0.7/">ckan-2.0.7</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.org/projects/ckan/?fromdocs=ckan">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.org/builds/ckan/?fromdocs=ckan">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.3.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>

  

  
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>