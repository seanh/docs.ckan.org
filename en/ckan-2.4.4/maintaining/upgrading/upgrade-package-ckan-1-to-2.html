

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Upgrading a CKAN 1 package install to CKAN 2.0 &mdash; CKAN 2.4.4 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  
    <link rel="top" title="CKAN 2.4.4 documentation" href="../../index.html"/>
        <link rel="up" title="Upgrading CKAN" href="index.html"/>
        <link rel="next" title="Upgrading a CKAN 2 package install to a new patch release" href="upgrade-package-to-patch-release.html"/>
        <link rel="prev" title="Upgrading CKAN" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>


<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://docs.ckan.org/en/latest/maintaining/upgrading/upgrade-package-ckan-1-to-2.html" />

<link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'maintaining/upgrading/upgrade-package-ckan-1-to-2'
</script>

<script type="text/javascript" src="../../_static/readthedocs-dynamic-include.js"></script>

<!-- end RTD <extrahead> --></head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../contents.html" class="fa fa-home"> CKAN</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="http://docs.ckan.org/en/ckan-2.4.4/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide.html">User guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../user-guide.html#what-is-ckan">What is CKAN?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user-guide.html#using-ckan">Using CKAN</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin-guide.html">Sysadmin guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin-guide.html#creating-a-sysadmin-account">Creating a sysadmin account</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin-guide.html#customizing-look-and-feel">Customizing look and feel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin-guide.html#managing-organizations-and-datasets">Managing organizations and datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin-guide.html#permanently-deleting-datasets">Permanently deleting datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin-guide.html#managing-users">Managing users</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Maintainer&#8217;s guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installing/index.html">Installing CKAN</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Upgrading CKAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../paster.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../authorization.html">Organizations and authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data-viewer.html">Data preview and visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filestore.html">FileStore and file uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastore.html">DataStore extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps-ideas.html">Apps &amp; Ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tag-vocabularies.html">Tag Vocabularies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../form-integration.html">Form Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linked-data-and-rdf.html">Linked Data and RDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background-tasks.html">Background tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../email-notifications.html">Email notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tracking.html">Page View Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multilingual.html">Multilingual Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stats.html">Stats Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration.html">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../solr-multicore.html">Multicore Solr setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/legacy-api.html">Legacy APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#making-an-api-request">Making an API request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#example-importing-datasets-with-the-ckan-api">Example: Importing datasets with the CKAN API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#api-versions">API versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#authentication-and-api-keys">Authentication and API keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#get-able-api-functions">GET-able API functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#jsonp-support">JSONP support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#api-examples">API Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html#action-api-reference">Action API reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../extensions/index.html">Extending guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/tutorial.html">Writing extensions tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/custom-config-settings.html">Using custom config settings in extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/remote-config-update.html">Making configuration options runtime-editable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/testing-extensions.html">Testing extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/best-practices.html">Best practices for writing extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/adding-custom-fields.html">Customizing dataset and resource metadata fields using IDatasetForm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/plugin-interfaces.html">Plugin interfaces reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/plugins-toolkit.html">Plugins toolkit reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/validators.html">Validator functions reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../theming/index.html">Theming guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../theming/templates.html">Customizing CKAN&#8217;s templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/static-files.html">Adding static files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/css.html">Customizing CKAN&#8217;s CSS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/fanstatic.html">Adding CSS and JavaScript files using Fanstatic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/javascript.html">Customizing CKAN&#8217;s JavaScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/best-practices.html">Best practices for writing CKAN themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/jinja-tags.html">Custom Jinja2 tags reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/variables-and-functions.html">Variables and functions available to templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/javascript-module-objects-and-methods.html">Objects and methods available to JavaScript modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/template-helper-functions.html">Template helper functions reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/template-snippets.html">Template snippets reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/javascript-sandbox.html">JavaScript sandbox reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/javascript-api-client.html">JavaScript API client reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theming/jquery-plugins.html">CKAN jQuery plugins reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/issues.html">Reporting issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/i18n.html">Translating CKAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/test.html">Testing CKAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/commit-messages.html">Writing commit messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/pull-requests.html">Making a pull request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/reviewing.html">Reviewing and merging a pull request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/documentation.html">Writing documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/simple-code-contributions.html">Projects for beginner CKAN developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/architecture.html">CKAN code architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/css.html">CSS coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/html.html">HTML coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/javascript.html">JavaScript coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/python.html">Python coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/string-i18n.html">String internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/testing.html">Testing coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/frontend/index.html">Frontend development guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/database-migrations.html">Database migrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/upgrading-dependencies.html">Upgrading CKAN&#8217;s dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/release-process.html">Doing a CKAN release</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../contents.html">CKAN</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../contents.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Maintainer&#8217;s guide</a> &raquo;</li>
      
          <li><a href="index.html">Upgrading CKAN</a> &raquo;</li>
      
    <li>Upgrading a CKAN 1 package install to CKAN 2.0</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://github.com/ckan/ckan/blob/ckan-2.4.4/doc/maintaining/upgrading/upgrade-package-ckan-1-to-2.rst" class="fa fa-github"> Edit on GitHub</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="upgrading-a-ckan-1-package-install-to-ckan-2-0">
<h1>Upgrading a CKAN 1 package install to CKAN 2.0<a class="headerlink" href="upgrade-package-ckan-1-to-2.html#upgrading-a-ckan-1-package-install-to-ckan-2-0" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to upgrade a CKAN 1.x package install to a newer version of
CKAN 1 (as opposed to upgrading to CKAN 2), see the
<a class="reference external" href="http://docs.ckan.org/en/ckan-1.8/install-from-package.html#upgrading-a-package-install">documentation</a>
relevant to the old CKAN packaging system.</p>
</div>
<p>The CKAN 2.0 package requires Ubuntu 12.04 64-bit, whereas previous CKAN
packages used Ubuntu 10.04. CKAN 2.0 also introduces many
backwards-incompatible feature changes (see <a class="reference internal" href="../../changelog.html"><em>the changelog</em></a>).
So it&#8217;s not possible to automatically upgrade to a CKAN 2.0 package install.</p>
<p>However, you can install CKAN 2.0 (either on the same server that contained
your CKAN 1.x site, or on a different machine) and then manually migrate your
database and any custom configuration, extensions or templates to your new CKAN
2.0 site. We will outline the main steps for migrating below.</p>
<ol class="arabic">
<li><p class="first">Create a dump of your CKAN 1.x database:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo -u ckanstd /var/lib/ckan/std/pyenv/bin/paster --plugin=ckan db dump db-1.x.dump --config=/etc/ckan/std/std.ini
</pre></div>
</div>
</li>
<li><p class="first">If you want to install CKAN 2.0 on the same server that your CKAN 1.x site
was on, uninstall the CKAN 1.x package first:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get autoremove ckan
</pre></div>
</div>
</li>
<li><p class="first">Install CKAN 2.0, either from a
<a class="reference internal" href="../installing/install-from-package.html"><em>package install</em></a>
if you have Ubuntu 12.04 64-bit, or from a
<a class="reference internal" href="../installing/install-from-source.html"><em>source install</em></a>
otherwise.</p>
</li>
<li><p class="first">Load your database dump from CKAN 1.x into CKAN 2.0. This will migrate all
of your datasets, resources, groups, tags, user accounts, and other data to
CKAN 2.0. Your database schema will be automatically upgraded, and your
search index rebuilt.</p>
<p>First, activate your CKAN virtual environment and change to the ckan dir:</p>
<pre class="literal-block">
. /usr/lib/ckan/default/bin/activate
cd /usr/lib/ckan/default/src/ckan
</pre>
<p>Now, load your database. <strong>This will delete any data already present in your
new CKAN 2.0 database</strong>. If you&#8217;ve installed CKAN 2.0 on a different
machine from 1.x, first copy the database dump file to that machine.
Then run these commands:</p>
<pre class="literal-block">
paster db clean -c /etc/ckan/default/production.ini
paster db load -c /etc/ckan/default/production.ini db-1.x.dump
</pre>
</li>
<li><p class="first">If you had any custom config settings in your CKAN 1.x instance that you
want to copy across to your CKAN 2.0 instance, then update your CKAN 2.0
/etc/ckan/default/production.ini file with these config settings. Note that not all CKAN 1.x
config settings are still supported in CKAN 2.0, see
<a class="reference internal" href="../configuration.html"><em>Configuration Options</em></a> for details.</p>
<p>In particular, CKAN 2.0 introduces an entirely new authorization system
and any custom authorization settings you had in CKAN 1.x will have to be
reconsidered for CKAN 2.0. See <a class="reference internal" href="../authorization.html"><em>Organizations and authorization</em></a> for details.</p>
</li>
<li><p class="first">If you had any extensions installed in your CKAN 1.x instance that you also
want to use with your CKAN 2.0 instance, install those extensions in CKAN
2.0. Not all CKAN 1.x extensions are compatible with CKAN 2.0. Check each
extension&#8217;s documentation for CKAN 2.0 compatibility and install
instructions.</p>
</li>
<li><p class="first">If you had any custom templates in your CKAN 1.x instance, these will need
to be adapted before they can be used with CKAN 2.0. CKAN 2.0 introduces
an entirely new template system based on Jinja2 rather than on Genshi.
See <a class="reference internal" href="../../theming/index.html"><em>Theming guide</em></a> for details.</p>
</li>
</ol>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation"
         aria-label="footer navigation">
      
        <a href="upgrade-package-to-patch-release.html" class="btn btn-neutral float-right"
           title="Upgrading a CKAN 2 package install to a new patch release"/>
           Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral"
           title="Upgrading CKAN">
           <span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr></hr>

  <p>An <a href="http://okfn.org">Open Knowledge Foundation</a> project.</p>

  <p class="copyright">
      &copy; 2009-2013, <a href="http://okfn.org/">Open Knowledge Foundation</a>.
    Licensed under <a
    href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
    Attribution ShareAlike (Unported) v3.0 License</a>.<br />
    <img src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" alt="CC License Logo" />
    <a href="http://opendefinition.org/"><img src="http://assets.okfn.org/images/ok_buttons/oc_80x15_blue.png" border="0"
      alt="{{ _('Open Content') }}" /></a>
  
  </p>

  <p>
    <a href="https://github.com/ckan/ckan">Source</a>
    &mdash;
    <a href="https://github.com/ckan/ckan/issues">Issues</a>
    &mdash;
    <a href="http://lists.okfn.org/mailman/listinfo/ckan-dev">Mailing List</a>
    &mdash;
    <a href="http://twitter.com/CKANProject">Twitter @CKANProject</a>
  </p>

  <p>
    Related Projects:
    <a href="http://thedatahub.org/">The DataHub</a>
    &mdash;
    <a href="http://datacatalogs.org">DataCatalogs.org</a>
    &mdash;
    <a href="http://openspending.org">OpenSpending.org</a>
    &mdash;
    <a href="http://opendatahandbook.org">Open Data Handbook</a>
  </p>


  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a>  provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: ckan-2.4.4
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../../../../index.html">latest</a></dd>
        
          <dd><a href="../../../ckan-2.6.0/index.html">ckan-2.6.0</a></dd>
        
          <dd><a href="../../../ckan-2.5.3/index.html">ckan-2.5.3</a></dd>
        
          <dd><a href="../../index.html">ckan-2.4.4</a></dd>
        
          <dd><a href="../../../ckan-2.3.5/index.html">ckan-2.3.5</a></dd>
        
          <dd><a href="../../../ckan-2.2.3/index.html">ckan-2.2.3</a></dd>
        
          <dd><a href="../../../ckan-2.1.5/index.html">ckan-2.1.5</a></dd>
        
          <dd><a href="http://docs.ckan.org/en/ckan-2.0.7/">ckan-2.0.7</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.org/projects/ckan/?fromdocs=ckan">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.org/builds/ckan/?fromdocs=ckan">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.4.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>

  

  
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>